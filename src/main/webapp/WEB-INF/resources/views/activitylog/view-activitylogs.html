<link rel="stylesheet" href="resources/components/datetime/datetimepicker.css"></link>
            <script src="resources/components/datetime/moment.js"></script>
             <script src="resources/components/datetime/datetimepicker.js"></script>
<div class="row">
	<div class="col-lg-12">
		<a ui-sref="dashboard.viewIpAccessList"
			class="btn-sm btn-primary pull-right margin-top-40"><i class="fa fa-arrow-circle-left fa-lg"></i> Back to Access List</a>
		<div flash-message="2000" class="col-md-5 pull-right margin-top35"></div>
		<h2 class="page-header">Activity Logs</h2>
	</div>
	<!-- /.col-lg-12 -->
</div>
<div class="row">
		
			<div class="col-md-12 no-padding">
				<div class="col-md-5ths no-padding">
					<div class="col-md-12">
						<label>Role</label><!-- <span class="error-class"
							ng-show="searchCountyMinError">&nbsp;&nbsp;Select at least
							one county</span>
				 -->	</div>
					<div class="col-md-12">
						<select class="form-control" ng-model="activityLogsSearchForm.roleId" ng-options="role.roleId as role.role for role in rolesForm">
                           <option value="">All</option>
</select>
					</div>
				</div>
				<div class="col-md-5ths no-padding">
					<div class="col-md-12">
						<label>Login ID</label>	</div>
					<div class="col-md-12">
						<input type="text" class="form-control" ng-model="activityLogsSearchForm.loginId">
					</div>
				</div>
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>Primary ID</label>
				</div>
				<div class="col-md-12">
						<input type="text" class="form-control" ng-model="activityLogsSearchForm.primaryLoginId">
				</div></div>
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>IP Address</label>
				</div>
				<div class="col-md-12">
						<input type="text" class="form-control" ng-model="activityLogsSearchForm.ipAddress">
				</div></div>
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>From Date</label>
				</div>
				<div class="col-md-12">
				<div class="input-group">
						<input type="text" class="form-control" ng-model="activityLogsSearchForm.fromDateTime" id="fromDateTime">
						<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>
				</div></div>
				</div>
				<div class="col-md-12">
				<br />
				</div>
				<div class="col-md-12 no-padding">
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>To Date</label>
				</div>
				<div class="col-md-12">
				<div class="input-group">
					<input type="text" class="form-control" ng-model="activityLogsSearchForm.toDateTime" id="toDateTime">
					<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>
				</div></div>
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>Activity</label>
				</div>
				<div class="col-md-12">
					<select class="form-control" ng-model="activityLogsSearchForm.activityId" ng-options="activity.id as activity.name for activity in activityList">
						<option value="">All</option>
					</select>
				</div></div>
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>&nbsp;</label>
					</div>
					<div class="col-md-12">
						<a class="btn btn-success" ng-click="searchActivityLogs()">Search</a>&nbsp;&nbsp;
						<a class="btn btn-danger" ng-click="init()">Reset</a>&nbsp;&nbsp;
				</div>
				</div>
				<div class="col-md-5ths no-padding">
				<div class="col-md-12">
						<label>&nbsp;</label>
					</div>
					<div class="col-md-12">
					<a class="btn btn-primary" ng-click="exportExcelModal()" ng-disabled="isExporting"> 
					<span ng-show="isExporting"><i
									class="glyphicon glyphicon-refresh spinning"></i>&nbsp;</span>{{exportButtonText}}</a>
				</div>
				</div>
				
				</div>
				</div><br>

<div class="row">
	 		<!-- /.panel-heading -->
			<div class="col-md-12">
		

					<table class="table table-hover table-striped table-bordered">

						<thead>
							<tr>
								<th width="10%" ng-mousedown="sort('mapId')">Login ID&nbsp;&nbsp;<span
									class="glyphicon sort-icon" ng-show="sortKey=='mapId'"
									ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
								<th width="14%" ng-mousedown="sort('name')">Role&nbsp;&nbsp;<span
									class="glyphicon sort-icon" ng-show="sortKey=='name'"
									ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
								<th width="14%">IP Address</th>
								<th width="14%">Activity</th>
								<th width="12%">Description</th>
								<th width="15%">Access In Time</th>
								<th width="15%">Access Out Time</th>
								
								<th width="6%">Actions</th>
						
							</tr>
<!-- 
							<tr>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon1"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.mapId" placeholder="Map Id"></div></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon2"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.name" placeholder="Agency name"></div></th>
									<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon4"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.countyName" placeholder="County"></div></th>
								<th></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon3"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text" id="updatedDate"
									ng-model="search.lastUpdatedDate" placeholder="Updated Date">
								<span class="input-group-addon"><i class="fa fa-calendar"></i></span>	
								</div></th>
								<th></th>
								<th></th>	
								
							</tr> -->
						</thead>
						<tbody >

							<tr ng-show="activityLogsForms.length>0"  dir-paginate="activityLogs in activityLogsForms|itemsPerPage:activityLogsSearchForm.itemsPerPage" current-page="activityLogsSearchForm.pageNumber" total-items="totalRecords" pagination-id="activitLogsPaginationId">
								<td class="wrap" ng-cloak>{{activityLogs.loginUsername}}</td>
								<td class="wrap" ng-cloak>{{activityLogs.role}}</td>
								<td class="wrap" ng-cloak>{{activityLogs.ipAddress}}</td>
								<td class="wrap" ng-cloak>{{activityLogs.activity}}</td>
								<td class="wrap" ng-cloak>{{activityLogs.description}}</td>
								<td class="wrap" ng-cloak>{{activityLogs.accessInTime}}</td>
								<td class="wrap" ng-cloak>{{activityLogs.accessOutTime}}</td>
								<td>
								<a href="" ng-cloak class="btn btn-xs btn-info hint--top" ng-click="viewActivityLog(activityLogs)" data-hint="View Activity Log"><i
										class="fa fa-eye"></i></a>
								</td>
							</tr>
							<tr ng-show="!activityLogsForms.length"><td colspan="8" align="center">No Records Found</td></tr><!-- 
							<tr ng-show="(policeDepartmentsForm|filter:search).length==0" ><td colspan="6" align="center">No Records Found</td></tr>  -->
						</tbody>
						
					</table>
					<dir-pagination-controls max-size="5" direction-links="true" boundary-links="true" pagination-id="activitLogsPaginationId" ng-show="activityLogsForms.length>0">
    					</dir-pagination-controls>
    					 <div class="col-md-3 pull-right no-padding" ng-show="activityLogsForms.length>0">
<label>Number of Records</label>
	<select
		class="form-control" ng-model="activityLogsSearchForm.itemsPerPage" name="noOfRows"
		id="noOfRows" ng-change="itemsPerFilter()">
		<option value="10">Show 10 Per Page</option>
		<option value="25">Show 25 Per Page</option>
		<option value="50">Show 50 Per Page</option>
		<option value="100">Show 100 Per Page</option>
	</select>    
			</div>
		<!-- /.panel -->
		</div>
	<!-- /.col-lg-12 -->
</div>

 <div class="modal fade" id="viewBlockedIPModal" role="dialog">
    <div class="modal-dialog modal-lg">    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          
          <h4 class="modal-title">View Blocked IP <span class="pull-right" style="margin-right:15px !important;"><a class="btn btn-primary btn-sm" ng-click="addBlockIPModal()"><i class="fa fa-ban"></i> Block IP</a></span><div flash-message="2000" class="col-md-5 pull-right"></div></h4>
        </div>
        <div class="modal-body">
              <table class="table table-striped table-bordered">
             		 <thead>
							<tr>
								<th width="80%">IP Address</th>
								<th width="20%">Actions</th>
							</tr>
						</thead>
						<tbody>
						<tr ng-repeat="blockedIP in blockedIPForms">
						<td>{{blockedIP.ipAddress}}</td>
						<td><a href="" class="btn btn-danger btn-xs hint--top" data-hint="Unblock" ng-click="unBlockIP(blockedIP.id)"><i class="fa fa-trash"></i></a></td>
						</tr>
						</tbody>
              </table>
        </div>
        <div class="modal-footer" >
         <a type="submit" class="btn btn-danger closeButton"  data-dismiss="modal">Close</a>
        </div>
      </div>
      
    </div>
 </div>
 
 <div class="modal fade" id="viewActivityLogModal" role="dialog">
    <div class="modal-dialog modal-lg">    
      <div class="modal-content">
      <form name="blockIPFormName" no-validate>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Activity Log </h4>
        </div>
        <div class="modal-body">
             <table class="table table-striped table-bordered">
              		<tbody>
              		<tr>
						<td class="col-md-3"><b>Login ID</b></td>
						<td class="col-md-3">{{activityLog.loginUsername}}</td>
						<td class="col-md-3"><b>Role</b></td>
						<td class="col-md-3">{{activityLog.role}}</td>
					</tr>
					<tr>
						<td class="col-md-3"><b>Primary Login ID</b></td>
						<td class="col-md-3">{{activityLog.primaryUsername}}</td>
						<td class="col-md-3"><b>IP Address</b></td>
						<td class="col-md-3">{{activityLog.ipAddress}}</td>
					</tr>
					<tr>
						<!-- <td class="col-md-3"><b>IP Location</b></td>
						<td class="col-md-3">{{activityLog.ipLocation}}</td>
						 --><td class="col-md-3"><b>Activity</b></td>
						<td class="col-md-3" colspan="3">{{activityLog.activity}}</td>
					</tr>
					<tr>
						<td class="col-md-3"><b>Access In Time</b></td>
						<td class="col-md-3">{{activityLog.accessInTime}}</td>
						<td class="col-md-3"><b>Access Out Time</b></td>
						<td class="col-md-3">{{activityLog.accessOutTime}}</td>
					</tr>
              		</tbody>
              </table>
        </div>
        <div class="modal-footer" >
         <button type="close" class="btn btn-danger closeButton" data-dismiss="modal">Close</button>
        </div>
       </form>
      </div>
      
    </div>
 </div> 
 
 <!-- Export Excel -->
 <div class="modal fade" id="exportExcelModal" role="dialog"
	data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<!-- Modal content-->
		<div class="modal-content">
			<form name="exportExcelModalForm" novalidate>
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Export Options</h4>
				</div>
				<div class="modal-body modal-min-height-120">
					<div class="col-md-12">
						<div class="col-md-4"><label>Report Layout :</label></div> 
						<div class="col-md-8">
						<span class="text-center"> <label class="radio-inline"><input
								type="radio" value="1" name="exportFormat" ng-model="formatType"
							 />Consolidated</label>
							&nbsp;&nbsp;&nbsp;&nbsp; <label class="radio-inline"><input
								type="radio" value="2" name="exportFormat" ng-model="formatType"
								 />Complete</label>
						</span><br />
						</div>
					</div>
					<div class="col-md-12">
						<div class="col-md-4"><label>Skip My IP :</label> </div>
						<div class="col-md-8">
						<input type="checkbox" ng-model="isSkipMyIp">
					</div>
					</div> 					
				</div>
				<div class="modal-footer">
					<button type="close" class="btn btn-danger" data-dismiss="modal" ng-click="resetExport()">Cancel</button>
					<a href="" type="submit" class="btn btn-success"
						data-dismiss="modal"
						ng-click="exportExcel()">Export</a>
				</div>
			</form>
		</div>

	</div>
</div>
 <script>
 $('#fromDateTime').datetimepicker({
 	format:'MM/DD/YYYY HH:mm:ss',
 	defaultDate:new Date()
});
 $('#toDateTime').datetimepicker({
	 format:'MM/DD/YYYY HH:mm:ss',
	 defaultDate:new Date()
});
 </script>