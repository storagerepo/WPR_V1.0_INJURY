<link rel="stylesheet"
	href="resources/components/datetime/datetimepicker.css"></link>
<script src="resources/components/datetime/datetimepicker.js"></script>
<script src="resources/components/datetime/moment.js"></script>
<div ng-cloak>
<div class="row">
<div class="col-lg-12">
		
	 <div flash-message="2000" class="col-md-5 pull-right margin-top35"></div>
	 <h2 class="page-header">Search Crash Report</h2>
	</div>
	<!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row">
	<form name="crashSearchForm" novalidate ng-cloak>
		<div class="col-md-12">
        	<div class="col-md-5ths">
       			<label>County</label>
       			<select class="form-control" ng-model="crashreport.county">
          			<option value="" ng-selected="true">All</option>
          			<option ng-repeat="county in countylist" value="{{county.id}}" ng-selected="{{county.id === crashreport.county}}">{{county.name}}</option>
     			</select>
        	</div>
          	<div class="col-md-5ths">
      			<label>Local Report Number</label>
       			<input type="text" class="form-control inputclass"  ng-model="crashreport.localReportNumber" name="localReportNumber" placeholder="Local Report Number" maxlength="20" >
        	</div>
         	<div class="col-md-5ths">
       			<label>Crash ID</label>
	       		<input type="text" class="form-control inputclass"  ng-model="crashreport.crashId" name="crashId" placeholder="Crash Id" maxlength="20" >
			</div>
			<div class="col-md-5ths">
       			<label>Crash From Date</label>
      			<div class="input-group">
					<input type="text" name="crashFromDate" id="CrashFromDate" class="form-control" ng-model="crashreport.crashFromDate" ng-change="checkCustomDate(crashreport.numberOfDays)" placeholder="Crash From Date"> 
					<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
				</div>
        	</div>
        	<div class="col-md-5ths">
       			<label>Number of Days</label>
         		<select class="form-control"  ng-model="crashreport.numberOfDays" name="numberOfDays" ng-change="checkCustomDate(crashreport.numberOfDays)">
                	<option value="1" ng-selected="true">1</option>
                	<option value="7">7</option>
                	<option value="15">15</option>
                	<option value="30">30</option>
                	<option value="0">Custom</option>
                </select>
       		</div>
        </div>
        
		<div class="col-md-12"> <br/>  </div>         
        
        <div class="col-md-12">
			<div class="col-md-5ths">
				<label>Crash To Date</label>
        		<div class="input-group">
					<input type="text" name="crashToDate" id="CrashToDate" class="form-control" ng-model="crashreport.crashToDate" placeholder="Crash To Date"  ng-disabled="disableCustom"> 
					<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
				</div>
				<span style="color:red" ng-if="crashToRequired==true">Please Enter Crash To Date</span>
         	</div>
         	<div class="col-md-5ths">
      			<label>Added On From Date</label>
        		<div class="input-group">
					<input type="text" name="addedFromDate" id="AddedFromDate" class="form-control" ng-model="crashreport.addedFromDate" placeholder="Added On From Date"> 
					<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
				</div>
       		</div>
       		<div class="col-md-5ths">
        		<label>Added On To Date</label> 
      			<div class="input-group">
					<input type="text" name="addedToDate" id="AddedToDate" class="form-control" ng-model="crashreport.addedToDate" placeholder="Added On To Date"> 
					<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
				</div>
				<span style="color:red" ng-if="addedToRequired==true">Please Enter Added On To Date</span>
       		</div>
       		<div class="col-md-5ths">
       			<label>&nbsp;</label>
       			<div>
	        		<a class="btn btn-success"  ng-disabled='crashSearchForm.$invalid' ng-click="searchCrashReport()">Search</a>
	        		<a class="btn btn-danger" ng-click="resetSearchData()">Reset</a>
        		</div>
       		</div>
        </div>
        <div class="col-md-12"> <br/>  </div>   
	</form>                    
         
          <div class="col-md-12">
                    <table class="table table-striped table-bordered" ng-cloak>
                        <thead>
                            <tr>
                                <th class="col-md-1">County</th>
                                <th class="col-md-2">Local Report Number</th>
                                <th class="col-md-1">Crash ID</th>
                                <th class="col-md-1">Crash Date</th>
                                <th class="col-md-1">Added Date</th>
                                <th class="col-md-2">Crash Report Status</th>
                                <th class="col-md-1">No.of.Patients</th>
                                <th class="col-md-1">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-show="crashSearchData.length>0"  dir-paginate="crashReport in crashSearchData|itemsPerPage:crashreport.recordsPerPage" total-items="totalRecords">
                                <td title="County">{{crashReport.county}}</td>
                                <td title="Local Report Number">{{crashReport.localReportNumber}}</td>
                                <td title="Crash Id">{{crashReport.crashId}}</td>
                                <td title="Crash Date">{{crashReport.crashDate}}</td>
                                <td title="Added Date">{{crashReport.addedDate}}</td>
                                <td title="Crash Report Status">{{crashReport.crashReportError}}</td>
                                <td title="Number of Patients">{{crashReport.numberOfPatients}}</td>
                                <td>
                                	<a href="{{crashReport.filePath}}" ng-cloak target="_blank" class="btn btn-xs btn-danger hint--top" data-hint="View Crash Report"><i
								class="fa fa-file-pdf-o"></i></a>
                                </td>
                            </tr>
                            <tr ng-show="crashSearchData.length==0">
                            <td colspan="8"><center><strong>No Records Found!!!</strong></center></td>
                            </tr>
                        </tbody>
                    </table>
                    <dir-pagination-controls max-size="5" on-page-change="searchCrashReportFromPage(newPageNumber)" direction-links="true" boundary-links="true" >
    					</dir-pagination-controls> 
    						<div class="col-md-3 pull-right no-padding">
<label>Number of Records</label>
	<select
		class="form-control" ng-model="crashreport.recordsPerPage" name="recordsPerPage"
		id="recordsPerPage">
		<option value="10">Show 10 Per Page</option>
		<option value="25">Show 25 Per Page</option>
		<option value="50">Show 50 Per Page</option>
		<option value="100">Show 100 Per Page</option>
	</select> 
</div>
</div>  
</div>  

      </div>   
<script>
$(function(){
	$("html,body").scrollTop(0);
});
    					
$('#CrashFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
}).on('dp.change', function (selected) {
    var minimumDate = new Date(selected.date.valueOf());
    $('#CrashToDate').data("DateTimePicker").setMinDate(minimumDate);	
}); 

$('#CrashToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});  
$('#AddedFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
}).on('dp.change', function (selected) {
    var minimumDate = new Date(selected.date.valueOf());
    $('#AddedToDate').data("DateTimePicker").setMinDate(minimumDate);	
});  
$('#AddedToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});  
</script>