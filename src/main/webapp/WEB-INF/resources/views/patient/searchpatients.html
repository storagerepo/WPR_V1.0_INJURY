<link rel="stylesheet"
	href="resources/components/datetime/datetimepicker.css"></link>
<script src="resources/components/datetime/datetimepicker.js"></script>
<script src="resources/components/datetime/moment.js"></script>
<div class="row">
<div class="col-lg-12">
		
	 <div flash-message="2000" class="col-md-5 pull-right"></div>
	 <h2 class="page-header">Search Patients</h2>
	</div>
	<!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row">
 <form name="patientSearchForm" novalidate>
        <div class="col-md-12">
        <div class="col-md-4">
       <div class="col-md-12"> <span class="redText">*</span> <label>County</label></div>
       <div class="col-md-12"> 
       <select class="form-control" ng-model="patient.county" required>
          <option value="" ng-selected="true">--Select County--</option>
          <option ng-repeat="county in countylist"
          value="{{county.name}}"
          ng-selected="{{county.name === patient.county}}">{{county.name}}</option>
     </select>
       </div>
        </div>
          <div class="col-md-4">
      <div class="col-md-12"> <label>Added On From Date</label></div>
       <div class="col-md-12"> 
        <div class="input-group">
		<input type="text" name="addedFromDate" id="AddedFromDate" class="form-control" ng-model="patient.addedFromDate" placeholder="Added On From Date" ng-required="!(patient.crashFromDate.length || patient.addedFromDate.length)"> 
		<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
		</div>
       </div>
        </div>
        <div class="col-md-4">
        <div class="col-md-12"> <label>Added On To Date</label></div>
       <div class="col-md-12"> 
      <div class="input-group">
		<input type="text" name="addedToDate" id="AddedToDate" class="form-control" ng-model="patient.addedToDate" placeholder="Added On To Date"> 
		<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
		</div>
		<span style="color:red" ng-if="addedToRequired==true">Please Enter Added On To Date</span>
       </div>
        </div>
       
        </div> 
         <div class="col-md-12"> <br/>  </div>         
          <div class="col-md-12">
        <div class="col-md-4">
       <div class="col-md-12"> <span class="redText">*</span> <label>Crash From Date</label></div>
       <div class="col-md-12"> 
       <div class="input-group">
		<input type="text" name="crashFromDate" id="CrashFromDate" class="form-control" ng-model="patient.crashFromDate" placeholder="Crash From Date" ng-required="!(patient.crashFromDate.length || patient.addedFromDate.length)"> 
		<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
		</div>
       
       </div>
        </div>
          <div class="col-md-4">
       <div class="col-md-12">  <label>Number of Days</label></div>
       <div class="col-md-12"> 
         <select class="form-control"  ng-model="patient.numberOfDays" name="numberOfDays" ng-change="checkCustomDate(patient.numberOfDays)">
                                        <option value="1" ng-selected="true">1</option>
                                        <option value="7">7</option>
                                        <option value="15">15</option>
                                        <option value="30">30</option>
                                        <option value="">Custom Date</option>
                                    </select>
       </div>
        </div>
         <div class="col-md-4">
       <div class="col-md-12">  <label>Crash To Date</label></div>
       <div class="col-md-12"> 
        <div class="input-group">
		<input type="text" name="crashToDate" id="CrashToDate" class="form-control" ng-model="patient.crashToDate" placeholder="Crash To Date"  ng-disabled="disableCustom"> 
		<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
		</div>
		<span style="color:red" ng-if="crashToRequired==true">Please Enter Crash To Date</span>
         </div>
        </div>
        </div>
          <div class="col-md-12"> <br/>  </div>          
          <div class="col-md-12">
       <div class="col-md-4"></div>
       <div class="col-md-4"></div>
         <div class="col-md-4">
       <div class="col-md-12">
        <a class="btn btn-success" ng-class="{'button-disable':patientSearchForm.$invalid}"  ng-disabled='isClean() || patientSearchForm.$invalid' ng-click="searchPatients()">Search</a>
        <a  class="btn btn-danger" ng-click="resetSearchData()">Reset</a>
       </div>
      
     </div>
        </div>            
          <div class="col-md-12"> <br/>  </div>                 
         </form>                    
                    
                    
                    
                    
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th class="col-md-1">County</th>
                                <th class="col-md-2">Local Report Number</th>
                                <th class="col-md-1">Crash ID</th>
                                <th class="col-md-2">Crash Date</th>
                                <th class="col-md-2">Added Date</th>
                                <th class="col-md-3">Crash Report Status</th>
                                <th class="col-md-1">Actions</th>
                            </tr>
                            <tr>
								<th></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon2"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.localReportNumber" placeholder="Local Report Number"></div></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon3"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.crashId" placeholder="Crash ID"></div></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon4"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.crashDate" placeholder="Crash Date"></div></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon5"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="search.addedDate" placeholder="Added Date"></div></th>
								<th></th>
								<th></th>	
								
							</tr>
                        </thead>
                        <tbody>
                            <tr ng-show="crashSearchData.length>0"  dir-paginate="crashReport in crashSearchData|itemsPerPage:crashreport.recordsPerPage" total-items="totalRecords">
                                <td>{{crashReport.county}}</td>
                                <td>{{crashReport.localReportNumber}}</td>
                                <td>{{crashReport.crashId}}</td>
                                <td>{{crashReport.crashDate}}</td>
                                <td>{{crashReport.addedDate}}</td>
                                <td>{{crashReport.crashReportError}}</td>
                                <td>
                                	<a href="{{crashReport.filePath}}" ng-cloak target="_blank" class="btn btn-xs btn-danger hint--top" data-hint="View Crash Report"><i
								class="fa fa-file-pdf-o"></i></a>
                                </td>
                            </tr>
                            <tr ng-show="crashSearchData.length==0">
                            <td colspan="7"><center><strong>No Records Found!!!</strong></center></td>
                            </tr>
                        </tbody>
                    </table>
                    <dir-pagination-controls max-size="5" on-page-change="searchPatientsFromPage(newPageNumber)" direction-links="true" boundary-links="true" >
    					</dir-pagination-controls> 
<script>
$(function(){
	$("html,body").scrollTop(0);
});
    					
$('#CrashFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});  
$('#CrashToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});  
$('#AddedFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});  
$('#AddedToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});  
</script>