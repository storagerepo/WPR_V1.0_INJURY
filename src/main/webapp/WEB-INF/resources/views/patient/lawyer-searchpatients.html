<link rel="stylesheet"
	href="resources/components/datetime/datetimepicker.css"></link>
<script src="resources/components/datetime/datetimepicker.js"></script>
<script src="resources/components/datetime/moment.js"></script>
<div class="row">
	<div class="col-lg-12">
		<div class="form-group passenger-type pull-right margin-top35">
			<label>Report Type:</label>
			<div class="btn-group">
				<label class="btn btn-default" btn-radio="0"
					ng-model="patient.isRunnerReport" ng-disabled="isLoading"> Normal <span
					class="glyphicon glyphicon-file"></span>
				</label> <label class="btn btn-default" btn-radio="1"
					ng-model="patient.isRunnerReport" ng-disabled="isLoading"> Runner <span
					class="glyphicon glyphicon-file"></span>
				</label>
				<label class="btn btn-default" btn-radio="3"
					ng-model="patient.isRunnerReport" ng-disabled="isLoading"> Scanned <span
					class="glyphicon glyphicon-file"></span>
				</label>
			</div>
		</div>
		<div flash-message="2000" class="col-md-5 pull-right margin-top35"></div>
		<h2 class="page-header">Search Clients</h2>
	</div>
	<!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row">
	<form name="patientSearchForm" novalidate ng-cloak>
		<div class="col-md-12 no-padding">
			<div class="col-md-5ths">
				<label>County</label> &nbsp;<a href="" data-toggle="popover"
					title="Info on County Selection:"
					data-content="<p><b>Subscribed - </b>All counties you have subscribed to.</p><p><b>Preferred - </b> Only counties you usually prefer to access.</p>"
					data-placement="top"><i class="fa fa-info-circle"></i></a><span
					class="error-class" ng-show="searchCountyMinError"> Select
					at least one county</span>
				<div ng-dropdown-multiselect="" preference-list="countyListType"
					options="mycounties" selected-model="patient.countyId"
					extra-settings="{idProp:'countyId',displayProp:'countyName',smartButtonMaxItems:'0',scrollable:true,scrollableHeight:'300px',buttonDefaultText:'Select Counties',showPreferenceOption:true}"
					events="countyEvents"></div>
			</div>
			<div class="col-md-5ths">
				<label>Crash From Date</label>
				<div class="input-group">
					<input type="text" name="crashFromDate" id="CrashFromDate"
						class="form-control" ng-model="patient.crashFromDate" validate-date
						ng-change="checkCustomDate()"
						placeholder="Crash From Date"> <span
						class="input-group-addon white-color-bg"> <span
						class="glyphicon glyphicon-calendar"></span></span>
				</div>
					<span style="color: red" ng-show="patientSearchForm.crashFromDate.$error.validateDate">Please
						Enter Valid Date</span>
			</div>
		<!-- 	<div ng-class="patient.isRunnerReport!=3?'col-md-5ths':'col-md-3'">
				<label>Number of Days</label> <select class="form-control"
					ng-model="patient.numberOfDays" name="numberOfDays"
					ng-change="checkCustomDate(patient.numberOfDays)">
					<option value="1">1</option>
					<option value="7">7</option>
					<option value="15">15</option>
					<option value="30">30</option>
					<option value="0">Custom</option>
				</select>
			</div> -->
			<div class="col-md-5ths">
				<label>Crash To Date</label>
				<div class="input-group">
					<input type="text" name="crashToDate" id="CrashToDate"
						class="form-control" ng-model="patient.crashToDate" validate-date
						placeholder="Crash To Date" ng-disabled="disableCustom" ng-change="crashToRequired=false"> <span
						class="input-group-addon white-color-bg"> <span
						class="glyphicon glyphicon-calendar"></span></span>
				</div>
				<span style="color: red" ng-if="crashToRequired==true">Please
					Enter Crash To Date</span>
					<span style="color: red" ng-show="patientSearchForm.crashToDate.$error.validateDate">Please
						Enter Valid Date</span>
			</div>
			<div class="col-md-5ths">
				<label>Added On From Date</label>
				<div class="input-group">
					<input type="text" name="addedOnFromDate" id="AddedFromDate"
						class="form-control" ng-model="patient.addedOnFromDate" validate-date
						ng-change="checkAddedOnToDate()" placeholder="Added On From Date">
					<span class="input-group-addon white-color-bg"> <span
						class="glyphicon glyphicon-calendar"></span></span>
				</div>
					<span style="color: red" ng-show="patientSearchForm.addedOnFromDate.$error.validateDate">Please
						Enter Valid Date</span>
			</div>
			<div class="col-md-5ths">
				<label>Added On To Date</label>
				<div class="input-group">
					<input type="text" name="addedOnToDate" id="AddedToDate"
						class="form-control" ng-model="patient.addedOnToDate" validate-date
						placeholder="Added On To Date"
						ng-disabled="isSelectedAddedFromDate" ng-change="addedToRequired=false"> <span
						class="input-group-addon white-color-bg"> <span
						class="glyphicon glyphicon-calendar"></span></span>
				</div>
				<span style="color: red" ng-if="addedToRequired==true">Please
					Enter Added On To Date</span>
				<span style="color: red" ng-show="patientSearchForm.addedOnToDate.$error.validateDate">Please
						Enter Valid Date</span>
			</div>
			
		</div>

		<div class="col-md-12">
			<br />
		</div>

		<div class="col-md-12 no-padding">
		
		<div ng-class="patient.isRunnerReport!=3?'col-md-5ths':'col-md-5'" ng-show="patient.isRunnerReport!=3&&patient.isRunnerReport!=1">
				<label>Reporting Agency</label> <div ng-dropdown-multiselect=""
					options="reportingAgencyList" selected-model="patient.reportingAgency"
					extra-settings="{idProp:'code',displayProp:'reportingAgencyName',smartButtonMaxItems:'0',enableSearch:true,optionClass:'multidrop-option-class',scrollable:true,scrollableHeight:'300px',buttonDefaultText:'Select Reporting Agency',showPreferenceOption:false}"
					events="reportingAgencyEvents">
					</div>
					
					<span
					class="error-class" ng-show="searchReportingAgencyMinError">&nbsp;&nbsp;Select
					at least one Agency</span>
			</div>	
			<div class="col-md-5ths" ng-show="patient.isRunnerReport!=3&&patient.isRunnerReport!=1">
				<label>Tier</label>&nbsp;&nbsp;<a href="" data-toggle="popover"
					title="Tier Details (Deceased victims not listed)"
					data-placement="bottom"><i class="fa fa-info-circle"></i></a><span
					class="error-class" ng-show="searchTierMinError">&nbsp;&nbsp;Select
					at least one tier</span>
				<div ng-dropdown-multiselect="" options="defaultTiers"
					selected-model="patient.tier"
					extra-settings="{smartButtonMaxItems:'0',disable:patient.isRunnerReport==1||patient.isRunnerReport==3}"></div>
			</div>
			<div class="col-md-5ths" ng-show="patient.isRunnerReport!=3&&patient.isRunnerReport!=1">
				<label>Damage Scale</label>&nbsp;<a href=""
					class="some-popover-link" data-placement="bottom"
					data-original-title="" data-toggle="popover" title="Damage Scale"
					data-content="<p>This combination of number & color denote <br/> the scale of damage to the related vehicle.<br/><br/><span class='badge badge-success'>1</span> - None<br/><span class='badge badge-yellow'>2</span> - Minor<br/><span class='badge badge-primary'>3</span> - Functional<br/><span class='badge badge-danger'>4</span> - Disabling<br/><span class='badge badge-default'>9</span> - Unknown</p>"><i
					class="fa fa-info-circle"></i></a>
				<div ng-dropdown-multiselect="" options="defaultDamageScale"
					selected-model="patient.damageScale"
					extra-settings="{smartButtonMaxItems:0,disable:patient.isRunnerReport==1||patient.isRunnerReport==3,showLegend:'true'}"></div>
				<span class="error-class" ng-show="searchDamageScaleMinError">&nbsp;&nbsp;Select
					at least one Damage Scale</span>
			</div>
			<div class="col-md-5ths">
				<label>Local Report Number</label> <input type="text"
					name="localReportNumber" class="form-control"
					ng-model="patient.localReportNumber"
					placeholder="Local Report Number">
			</div>
			
			<div class="col-md-5ths">
				<label>&nbsp;</label>
				<div>
					<a class="btn btn-success"
						ng-class="{'button-disable':patientSearchForm.$invalid}"
						ng-disabled='patientSearchForm.$invalid||disableSearch'
						ng-click="searchPatients()">Search</a> <a class="btn btn-danger"
						ng-click="resetSearchData()">Reset</a>
				</div>
			</div>
		</div>
		<div class="col-md-12">
			<div class="col-md-12 no-padding hr-tag-alter"></div>
			<div class="col-md-6 no-padding">
				<a href="" ng-disabled="isCleanCheckbox()||patient.isArchived==1"
					ng-click="releaseLawyer()" class="btn btn-sm btn-danger" ng-show="patient.isRunnerReport!=3">Release
					Clients</a> <a href=""
					ng-disabled="isCleanCheckbox()||patient.isArchived==1||isDisableButtons"
					ng-click="moveArchive(patient.isRunnerReport)" class="btn btn-sm btn-warning">Archive
					all</a> <a href=""
					ng-disabled="isCleanCheckbox()||patient.isArchived==0||isDisableButtons"
					ng-click="releaseArchive(patient.isRunnerReport)" class="btn btn-sm btn-primary">Restore
					all</a> <a href="" ng-disabled="isCleanCheckbox()||isDisableButtons"
					ng-click="printReports()" class="btn btn-sm btn-info">Print
					Reports</a>&nbsp;<a href="" data-toggle="modal"
					data-target="#printReportsHelpModal"><i
					class="fa fa-info-circle"></i></a>
			</div>
			<div class="col-md-6 no-padding">
				<div class="col-md-3 margin-top-5 text-right no-padding">Records
					Type&nbsp;&nbsp;</div>
				<div class="col-md-3 no-padding">
					<select class="form-control input-sm"
						ng-change="secoundarySearchPatient();resetResultData();"
						name="isArchived" ng-model="patient.isArchived">
						<option value="0">Open</option>
						<option value="1">Archived</option>
					</select>
				</div>
				<div class="col-md-3 margin-top-5 text-right no-padding" ng-show="patient.isRunnerReport==3">Filter
						Status by&nbsp;&nbsp;</div>
					<div class="col-md-3 no-padding" ng-show="patient.isRunnerReport==3">
						<select class="form-control input-sm" name="directReportStatus"
							ng-change="secoundarySearchPatient()"
							ng-model="patient.directReportStatus">
							<option value="-1">All</option>
							<option value="0">New</option>
							<option value="1">Processing</option>
							<option value="2">Do Not Call</option>
						</select>
					</div>
			</div>
			<div class="col-md-12 no-padding hr-tag-alter"></div>
		</div>
		<div class="col-md-12">
			<div class="col-md-12 archive-filter" ng-show="patient.isArchived==1">
				<div class="col-md-3"></div>
				<div class="col-md-9 padding-7px">
					<div class="col-md-4 margin-top-5 no-padding text-right no-padding">
						<b>Filter by Archive Date : </b>
					</div>
					<div class="col-md-8 no-padding">
						<div class="col-md-1 margin-top-5 no-padding">&nbsp;From</div>
						<div class="col-md-3 no-padding">
							<div class="input-group">
								<input type="text" name="archivedFromDate" id="archivedFromDate"
									class="form-control input-sm" ng-change="checkArchivedToDate()"
									ng-model="patient.archivedFromDate" placeholder="Date">
								<span class="input-group-addon white-color-bg"> <span
									class="glyphicon glyphicon-calendar"></span></span>
							</div>
							<span style="color: red; font-size: 13px"
								ng-show="archivedFromDateRequired">Enter From Date</span>
						</div>
						<div class="col-md-1 margin-top-5 no-padding">&nbsp;&nbsp;
							To</div>
						<div class="col-md-3 no-padding">
							<div class="input-group">
								<input type="text" name="archivedToDate" id="archivedToDate"
									class="form-control input-sm" ng-model="patient.archivedToDate"
									ng-change="archivedToDateRequired=false" placeholder="Date">
								<span class="input-group-addon white-color-bg"> <span
									class="glyphicon glyphicon-calendar"></span></span>
							</div>
							<span style="color: red; font-size: 13px"
								ng-show="archivedToDateRequired">Enter To Date</span>
						</div>
						<div class="col-md-3 margin-top-5">
							<a class="btn btn-success btn-xs" href=""
								ng-click="searchWithArchiveDateFilter()">Select</a> &nbsp; <a
								href="" ng-click="resetArchiveFilterDate()"><u>Reset</u></a>
						</div>

					</div>
				</div>
			</div>
		</div>
	</form>


	<div class="col-md-12" ng-show="patient.isRunnerReport!=3">

		<table class="table table-bordered persist-area" ng-cloak>
			<thead class="persist-header">
				<tr>
					<th width="2%"><input ng-change="isChecked()"
						ng-model="isCheckedAllPatients" type="checkbox" id="checkAll"></th>
					<th width="20%">Client Name <br /> <span class="client-name">(Last,
							First, Middle)</span></th>
					<th width="12%">Age</th>
					<th width="6%">Unit / Damage</th>
					<th width="8%">County</th>
					<th width="12%">Reporting Agency</th>
					<th width="16%">Address</th>
					<th width="7%">Tier</th>
					<th width="8%" ng-show="patient.isArchived==1" ng-cloak>Archived
						On</th>
					<th width="18%">Actions</th>
				</tr>
				<tr>
					<th></th>
					<th>
						<div class="input-group">
							<span class="input-group-addon search" id="basic-addon2"><i
								class="fa fa-search"></i></span> <input class="form-control"
								type="text" ng-model="patient.patientName"
								ng-change="secoundarySearchPatient()" placeholder="Client Name">
						</div>
					</th>
					<!-- <th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon2"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="patient.localReportNumber" ng-change="secoundarySearchPatient()" placeholder="Local Report No"></div></th>
								 -->
					<th>
						<div ng-dropdown-multiselect="" options="defaultAge"
							selected-model="patient.age"
							extra-settings="{smartButtonMaxItems:'0',scrollable:false,showCheckAll: false,showUncheckAll:false,disable:patient.isRunnerReport==1}"
							events="ageEvents"></div>
					</th>
					<th></th>
					<th></th>
					<th></th>
					<th></th>
					<th></th>
					<th ng-show="patient.isArchived==1"></th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr class="archive-group-header"
					ng-show="lawyerPatientSearchData[0].archivedDate!=''"
					ng-repeat-start="resultMainData in lawyerPatientSearchData">
					<td colspan="1"><input
						ng-change="selectArchiveGroup(this,'{{resultMainData.archivedDate}}')"
						ng-model="isCheckedAllGroupArchivePatients" type="checkbox"
						id="{{resultMainData.archivedDate}}"></td>
					<td colspan="9"><span><b>Archive Date: </b>{{resultMainData.archivedDate}}</span></td>
				</tr>
				<tr ng-repeat-start="resultData in resultMainData.searchResult" ng-class="resultData.isRunnerReport==4?'group-header-back-convert':'group-header-back'">
					<td colspan="1"><input
						ng-change="selectGroup(this,'{{resultMainData.archivedDate}}')"
						ng-model="isCheckedAllGroupPatients" type="checkbox"
						id="{{resultData.localReportNumber}}{{resultMainData.archivedDate}}"></td>
					<td colspan="9"><span><b>Local Report No:</b>
							{{resultData.localReportNumber}} </span><span
						class="badge badge-warning hint--top"
						ng-show="resultData.isRunnerReport==2" data-hint="Runner Report">R</span>
						<span class="badge badge-success hint--top"
						 ng-show="resultData.isRunnerReport==4&&resultData.directReportStatus==null" data-hint="Status: New">New</span>
						<span class="badge badge-warning hint--top"
						 ng-show="resultData.isRunnerReport==4&&resultData.directReportStatus==1" data-hint="Status: Processing">Proc</span>
						<span class="badge badge-danger hint--top"
						 ng-show="resultData.isRunnerReport==4&&resultData.directReportStatus==2" data-hint="Status: Do-Not-Call">DNC</span>
						<span class="pull-right"><span><b>Unit In Error: </b><span
								ng-show="resultData.unitInError!='' && resultData.unitInError!=null">{{resultData.unitInError}}</span><span
								ng-show="resultData.unitInError=='' || resultData.unitInError==null">-</span></span>&nbsp;&nbsp;|&nbsp;&nbsp;<span><b>Crash
									Date: </b>{{resultData.crashDate}}</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span><b>Added
									Date: </b>{{resultData.addedDate}}</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span><b>Clients
									Count:</b></span>&nbsp;&nbsp;<span class="hint--top patient-count-circle"
							data-hint="{{resultData.numberOfPatients}} Clients">{{resultData.numberOfPatients}}</span></span></td>
				</tr>
				<tr
					dir-paginate="lawyerData in resultData.patientSearchLists|itemsPerPage:patient.itemsPerPage"
					current-page="patient.pageNumber" total-items="totalRecords"
					pagination-id="lawyerPatientPageId">


					<td><input type="checkbox" ng-change="isCheckedIndividual()"
						ng-model="lawyerData.selected" /></td>
					<td><span
						ng-if="(lawyerData.injuries==2 || lawyerData.injuries==3 || lawyerData.injuries==4) && (lawyerData.age>=18 || lawyerData.age==null)"><a
							href="" class="hint--top redText"
							ng-click="viewPatientModal(lawyerData.patientId)"
							data-hint="View Client"><span ng-show="lawyerData.name!=null">{{lawyerData.name}}</span><span ng-show="lawyerData.name==null">N/A</span></a><span
							class="redText margin-left-10 hint--top"
							data-hint="Injuries : {{lawyerData.injuriesName}}"><i
								class="fa fa-arrow-up"></i></span><span
							ng-show="lawyerData.seatingPosition=='1'"
							class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span>
							<span class="badge hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==1"
							data-hint="Runner Report">R</span> <span
							class="badge badge-success hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==2"
							data-hint="Updated Runner Report">R</span></span> <span
						ng-if="(lawyerData.injuries==2 || lawyerData.injuries==3 || lawyerData.injuries==4) && (lawyerData.age<18 && lawyerData.age!=null)"><a
							href="" class="hint--top warningText"
							ng-click="viewPatientModal(lawyerData.patientId)"
							data-hint="View Client"><span ng-show="lawyerData.name!=null">{{lawyerData.name}}</span><span ng-show="lawyerData.name==null">N/A</span></a></a><span
							class="redText margin-left-10 hint--top"
							data-hint="Injuries : {{lawyerData.injuriesName}}"><i
								class="fa fa-arrow-up"></i></span><span
							ng-show="lawyerData.seatingPosition=='1'"
							class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span>
							<span class="badge hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==1"
							data-hint="Runner Report">R</span> <span
							class="badge badge-success hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==2"
							data-hint="Updated Runner Report">R</span></span> <span
						ng-if="(lawyerData.injuries!=2 && lawyerData.injuries!=3 && lawyerData.injuries!=4) && (lawyerData.age>=18 || lawyerData.age==null)"><a
							href="" class="hint--top"
							ng-click="viewPatientModal(lawyerData.patientId)"
							data-hint="View Client"><span ng-show="lawyerData.name!=null">{{lawyerData.name}}</span><span ng-show="lawyerData.name==null">N/A</span></a></a><span
							ng-show="lawyerData.seatingPosition=='1'"
							class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span>
							<span class="badge hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==1"
							data-hint="Runner Report">R</span> <span
							class="badge badge-success hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==2"
							data-hint="Updated Runner Report">R</span></span> <span
						ng-if="(lawyerData.injuries!=2 && lawyerData.injuries!=3 && lawyerData.injuries!=4) && (lawyerData.age<18 && lawyerData.age!=null)"><a
							href="" class="hint--top warningText"
							ng-click="viewPatientModal(lawyerData.patientId)"
							data-hint="View Client"><span ng-show="lawyerData.name!=null">{{lawyerData.name}}</span><span ng-show="lawyerData.name==null">N/A</span></a></a><span
							ng-show="lawyerData.seatingPosition=='1'"
							class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span>
							<span class="badge hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==1"
							data-hint="Runner Report">R</span> <span
							class="badge badge-success hint--top"
							ng-show="lawyerData.isRunnerReport==2&&lawyerData.isRunnerReportPatient==2"
							data-hint="Updated Runner Report">R</span></span>
							</td>
					<td title="Age"><span
						ng-show="lawyerData.age!='' && lawyerData.age!=null">{{lawyerData.age}}</span><span
						ng-show="lawyerData.age=='' || lawyerData.age==null">-</span></td>
					<td title="Unit Number"><span
						ng-show="lawyerData.unitNumber!='' && lawyerData.unitNumber!=null">{{lawyerData.unitNumber}}
							<span class="badge badge-success hint--top"
							ng-show="lawyerData.damageScale==1" data-hint="None">{{lawyerData.damageScale}}</span>
							<span class="badge badge-yellow hint--top"
							ng-show="lawyerData.damageScale==2" data-hint="Minor">{{lawyerData.damageScale}}</span>
							<span class="badge badge-primary hint--top"
							ng-show="lawyerData.damageScale==3" data-hint="Functional">{{lawyerData.damageScale}}</span>
							<span class="badge badge-danger hint--top"
							ng-show="lawyerData.damageScale==4" data-hint="Disabling">{{lawyerData.damageScale}}</span>
							<span class="badge badge-default hint--top"
							ng-show="lawyerData.damageScale==9" data-hint="Unknown">{{lawyerData.damageScale}}</span>
					</span> <span
						ng-show="lawyerData.unitNumber=='' || lawyerData.unitNumber==null">-</span></td>
					<td title="County">{{lawyerData.county}}</td>
					<td title="Reporting Agency">
					<span ng-show="lawyerData.reportingAgencyName!=''&&lawyerData.reportingAgencyName!=null">{{lawyerData.reportingAgencyName}}</span><span
						ng-show="lawyerData.reportingAgencyName==''||lawyerData.reportingAgencyName==null">-</span></td>
					<td title="Address"><span
						ng-show="lawyerData.address!='' && lawyerData.address!=null">{{lawyerData.address}}</span><span
						ng-show="lawyerData.address=='' || lawyerData.address==null">-</span></td>

					<td><span
						ng-show="lawyerData.tier!='' && lawyerData.tier!=null">Tier
							{{lawyerData.tier}}</span><span
						ng-show="lawyerData.tier=='' || lawyerData.tier==null">-</span></td>
					<td title="Archived On" ng-show="patient.isArchived==1" ng-cloak>{{lawyerData.archivedDateTime}}</td>
					<td><a href="{{lawyerData.crashReportFileName}}" ng-cloak
						target="_blank" class="btn btn-xs btn-info hint--top"
						data-hint="View Crash Report" ng-show="{{(resultData.isRunnerReport==0||resultData.isRunnerReport==1)||((resultData.isRunnerReport==4&&lawyerData.oldFilePath==null)||(resultData.isRunnerReport==2&&lawyerData.oldFilePath==null))}}"><i class="fa fa-file-pdf-o"></i></a>&nbsp;
						<a href="" tabindex=0 ng-cloak popover-html-unsafe="<p><a href='{{lawyerData.crashReportFileName}}' target='_blank' class='btn btn-success btn-xs'>Normal <i class='fa fa-file-pdf-o'></i></a> &nbsp;&nbsp; <a href='{{lawyerData.oldFilePath}}' target='_blank' class='btn btn-danger btn-xs'>Scanned <i class='fa fa-file-pdf-o'></i></a></p>" popover-title="Report Type" popover-placement="top"
						class="btn btn-xs btn-info hint--right" data-hint="View Crash Report" popover-trigger="focus" ng-show="{{(resultData.isRunnerReport==4&&lawyerData.oldFilePath!=null)||(resultData.isRunnerReport==2&&lawyerData.oldFilePath!=null)}}"><i class="fa fa-file-pdf-o"></i></a>
						<a href="" ng-cloak
						ng-show={{lawyerData.isArchived==0||lawyerData.isArchived==null}}
						ng-click="moveSingleFileToArchive(lawyerData.patientId)"
						class="btn btn-xs btn-success hint--top" data-hint="Archive"><i
							class="fa fa-archive"></i></a> <a href="" ng-cloak
						ng-show={{lawyerData.isArchived==1}}
						ng-click="releaseSingleFileFromArchive(lawyerData.patientId)"
						class="btn btn-xs btn-danger hint--top" data-hint="Restore"><i
							class="fa fa-share-square-o"></i></a></td>
				</tr>
				<tr ng-repeat-end=""></tr>
				<tr ng-repeat-end=""></tr>
				<tr ng-show="totalRecords==0">
					<td colspan="10"><center>
							<strong>No Records Found!!!</strong>
						</center></td>
				</tr>
			</tbody>
		</table>
		<dir-pagination-controls ng-show="totalRecords>0" max-size="5"
			direction-links="true" boundary-links="true"
			pagination-id="lawyerPatientPageId"> </dir-pagination-controls>

		<div class="col-md-3 pull-right no-padding">
			<label>Number of Records</label> <select class="form-control"
				ng-model="patient.itemsPerPage" ng-change="itemsPerFilter()"
				name="itemsPerPage" id="noOfRows">
				<option value="10">Show 10 Per Page</option>
				<option value="25">Show 25 Per Page</option>
				<option value="50">Show 50 Per Page</option>
				<option value="100">Show 100 Per Page</option>
				<option value="250">Show 250 Per Page</option>
			</select>
		</div>
	</div>
	
<!-- Direct Runner Report  -->
	<div class="col-md-12" ng-show="patient.isRunnerReport==3">
			<table class="table table-bordered" ng-cloak>
				<thead>
					<tr>
						<th width="3%"><input
							ng-change="checkedAllDirectReport();isCleanCheckboxDirectReport()"
							ng-model="isCheckedAllDirectReport" type="checkbox" id="checkAll"></th>
						<th width="18%">Local Report Number</th>
						<th width="10%">Crash Date</th>
						<th width="15%">County</th>
						<th width="10%">Added Date</th>
						<th width="12%">Status</th>
						<th width="20%" ng-show="patient.isArchived==1">Archived On</th>
						<th width="15%">Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr class="archive-group-header"
						ng-repeat-start="directRunnerReportMain in directRunnerReportSearchData"
						ng-show="directRunnerReportSearchData[0].archivedDate!=''">
						<td colspan="1"><input
							ng-change="selectDirectReportArchiveGroup(this,'{{directRunnerReportMain.archivedDate}}');isCleanCheckboxDirectReport();"
							ng-model="isCheckedAllGroupArchiveDirectReport" type="checkbox"
							id="{{directRunnerReportMain.archivedDate}}"></td>
						<td colspan="7"><span><b>Archive Date: </b>{{directRunnerReportMain.archivedDate}}</span></td>
					</tr>
					<tr ng-show="directRunnerReportSearchData.length>0"
						dir-paginate="directRunnerReport in directRunnerReportMain.crashReportForms|itemsPerPage:patient.itemsPerPage"
						current-page="patient.pageNumber" total-items="totalRecords"
						pagination-id="directRunnerReportPageId">
						<td colspan="1"><input type="checkbox"
							ng-change="isCleanCheckboxDirectReport()"
							ng-model="directRunnerReport.selected"
							ng-checked="directRunnerReport.selected"></td>
						<td title="Local Report Number">{{directRunnerReport.localReportNumber}}</td>
						<td title="Crash Date">{{directRunnerReport.crashDate}}</td>
						<td title="County">{{directRunnerReport.county}}</td>
						<td title="Added Date">{{directRunnerReport.addedDate}}</td>
						<td title="Report Status">{{directRunnerReport.directReportStatusName}}</td>
						<td title="Archived On" ng-show="patient.isArchived==1">{{directRunnerReport.archivedDateTime}}</td>
						<td><a href="{{directRunnerReport.filePath}}" ng-cloak
							target="_blank" class="btn btn-xs btn-info hint--top"
							data-hint="View Crash Report"><i class="fa fa-file-pdf-o"></i></a>
							<a href="" ng-cloak
							ng-show={{directRunnerReport.isArchived==0||directRunnerReport.isArchived==null}}
							ng-click="moveSingleDirectReportToArchive(directRunnerReport.crashId)"
							class="btn btn-xs btn-success hint--top" data-hint="Archive"><i
								class="fa fa-archive"></i></a> <a href="" ng-cloak
							ng-show={{directRunnerReport.isArchived==1}}
							ng-click="releaseSingleDirectReportFromArchive(directRunnerReport.crashId)"
							class="btn btn-xs btn-danger hint--top" data-hint="Restore"><i
								class="fa fa-share-square-o"></i></a> <a href="" ng-cloak
							ng-click="directReportChangeStatusModal(directRunnerReport.crashId,directRunnerReport.directReportStatus)"
							class="btn btn-xs btn-warning hint--top"
							data-hint="Change Status"><i class="fa fa-exchange"></i></a></td>
					</tr>
					<tr ng-repeat-end=""></tr>
					<tr ng-show="totalRecords==0">
						<td colspan="8"><center>
								<strong>No Records Found!!!</strong>
							</center></td>
					</tr>
				</tbody>
			</table>
			<dir-pagination-controls max-size="5" direction-links="true"
				boundary-links="true" pagination-id="directRunnerReportPageId">
			</dir-pagination-controls>
			<div class="col-md-3 pull-right no-padding">
				<label>Number of Records</label> <select class="form-control"
					ng-model="patient.itemsPerPage" ng-change="itemsPerFilter()"
					name="noOfRows" id="noOfRows">
					<option value="10">Show 10 Per Page</option>
					<option value="25">Show 25 Per Page</option>
					<option value="50">Show 50 Per Page</option>
					<option value="100">Show 100 Per Page</option>
				</select>
			</div>
		</div>
</div>
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content ">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<div class="form-group passenger-type pull-right">
						<div class="btn-group" data-toggle="buttons">
							<label class="btn btn-default unit-toggle-label"
								ng-class="{active:patientDetails.seatingPosition!='1' || patientDetails.seatingPosition==null}"
								ng-disabled="patientDetails.seatingPosition=='1'"> <input
								type="radio" name="unit"
								ng-model="patientDetails.seatingPosition" id="option1"
								autocomplete="off"> Passenger
							</label> <label class="btn btn-default unit-toggle-label"
								ng-class="{active:patientDetails.seatingPosition=='1'}"
								ng-disabled="patientDetails.seatingPosition!='1' || patientDetails.seatingPosition==null">
								<input type="radio" name="unit"
								ng-model="patientDetails.seatingPosition"
								ng-selected="patientDetails.seatingPosition=='1'" id="option2"
								autocomplete="off"> &nbsp;&nbsp;Driver&nbsp;&nbsp;
							</label>
						</div>
					</div>
					<h4 class="modal-title" id="myModalLabel">Client Details</h4>
				</div>
				<div class="modal-body">
					<table class="table table-striped table-bordered">
						<tr>
							<td class="col-md-3"><b>Name</b></td>
							<td class="col-md-3">{{patientDetails.name}}</td>
							<td class="col-md-3"><b>Gender</b></td>
							<td class="col-md-3">{{patientDetails.gender}}</td>

						</tr>
						<tr>
							<td class="col-md-3"><b>Date Of Birth</b></td>
							<td class="col-md-3">{{patientDetails.dateOfBirth}}</td>
							<td class="col-md-3"><b>Age</b></td>
							<td class="col-md-3">{{patientDetails.age}}</td>
						</tr>
						<tr>
							<td class="col-md-3"><b>Phone Number</b></td>
							<td class="col-md-3">{{patientDetails.phoneNumber}}</td>
							<td class="col-md-3"><b>Address</b></td>
							<td class="col-md-3">{{patientDetails.address}}</td>

						</tr>
						<tr>
							<td class="col-md-3"><b>Unit Number</b></td>
							<td class="col-md-3">{{patientDetails.unitNumber}}</td>
							<td class="col-md-3"><b>Damage Scale</b></td>
							<td class="col-md-3">{{patientDetails.damageScale==1?"1 -
								None":patientDetails.damageScale==2?"2 -
								Minor":patientDetails.damageScale==3?"3 -
								Functional":patientDetails.damageScale==4?"4 -
								Disabling":patientDetails.damageScale==9?"9 - Unknown":"Not
								Available"}}</td>


						</tr>
						<tr>

							<td class="col-md-3"><b>Number of Units</b></td>
							<td class="col-md-3">{{patientDetails.numberOfUnits}}</td>
							<td class="col-md-3"><b>Units in Error</b></td>
							<td class="col-md-3">{{patientDetails.unitInError}}</td>


						</tr>
						<tr>

							<td class="col-md-3"><b>Local Report Number</b></td>
							<td class="col-md-3">{{patientDetails.localReportNumber}}</td>
							<td class="col-md-3"><b>Injuries</b></td>
							<td class="col-md-3">{{patientDetails.injuriesName}}</td>
						</tr>
						<tr>

							<td class="col-md-3"><b>Crash Severity</b></td>
							<td class="col-md-3">{{patientDetails.crashSeverityName}}</td>
							<td class="col-md-3"><b>Crash Date</b></td>
							<td class="col-md-3">{{patientDetails.crashDate}}</td>
						</tr>
						<tr>

							<td class="col-md-3"><b>Time of Crash</b></td>
							<td class="col-md-3">{{patientDetails.timeOfCrash}}</td>
							<td class="col-md-3"><b>EMS Agency</b></td>
							<td class="col-md-3">{{patientDetails.emsAgency}}</td>
						</tr>

						<tr>

							<td class="col-md-3"><b>Report Agency Name</b></td>
							<td class="col-md-3">{{patientDetails.reportingAgencyName}}</td>
							<td class="col-md-3"><b>County</b></td>
							<td class="col-md-3">{{patientDetails.county}}</td>
						</tr>
						<tr>

							<td class="col-md-3"><b>City Village Township</b></td>
							<td class="col-md-3">{{patientDetails.cityVillageTownship}}</td>
							<td class="col-md-3"><b>Medical Facility</b></td>
							<td class="col-md-3">{{patientDetails.medicalFacility}}</td>
						</tr>
						<tr>
							<td class="col-md-3"><b>At Fault INS. Company</b></td>
							<td class="col-md-3">{{patientDetails.atFaultInsuranceCompany}}</td>
							<td class="col-md-3"><b>At Fault Policy Number</b></td>
							<td class="col-md-3">{{patientDetails.atFaultPolicyNumber}}</td>
						</tr>
						<tr>
							<td class="col-md-3"><b>Victim INS. Company</b></td>
							<td class="col-md-3">{{patientDetails.victimInsuranceCompany}}</td>
							<td class="col-md-3"><b>Victim Policy Number</b></td>
							<td class="col-md-3">{{patientDetails.victimPolicyNumber}}</td>
						</tr>
					</table>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Select Printer -->
	<div class="modal fade" id="selectPrinterModal" role="dialog"
		data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<form name="printerselectform" no-validate>
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Printer</h4>
					</div>
					<div class="modal-body">
						<label>Logged in User account :</label> {{user}} &nbsp;&nbsp; - <a
							href="" ng-click="switchAccount()">Switch Account</a><br /> <br />
						<select ng-cloak class="form-control" name="printer"
							ng-model="printerId" required
							onchange="this.style.color = this.options[this.selectedIndex].style.color;">
							<option value="">-- Please Select --</option>
							<option ng-repeat="printer in printersList"
								ng-if="printer.id!='__google__docs'"
								ng-style="{color:{ONLINE:'green',OFFLINE:'red'}[printer.connectionStatus]}"
								value="{{printer.id}}">{{printer.defaultDisplayName}}
								{{printer.displayConnectionStatus}}</option>
						</select> <span class="error-container"
							ng-show="printerselectform.printer.$dirty && printerselectform.printer.$invalid">
							<span style="color: red;"
							ng-show="printerselectform.printer.$error.required">Please
								select printer</span>
						</span> <br />
						<div>
							<label>Note :</label>
							<ul>
								<li>Printers listed here are based on the associated google
									account. If you want a different printer, Please Click <b>Switch
										Account</b> link and login with the corresponding google account.
								</li>
								<li>To add printers in google account, please <a href=""
									data-dismiss="modal" ng-click="moveToHelpPage();">click
										here</a> and follow the instructions.
								</li>
							</ul>
						</div>
					</div>
					<div class="modal-footer">
						<a class="btn btn-danger" ng-disabled="printerselectform.$invalid"
							data-dismiss="modal" ng-click="postFilesToPrint()">Print</a>
					</div>
				</form>
			</div>

		</div>
	</div>

	<!-- Print Rports Help Info -->
	<div class="modal fade" id="printReportsHelpModal" role="dialog"
		data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog modal-lg">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">How to Print Reports?</h4>
				</div>
				<div class="modal-body">
					<p>
						<b>For printing reports from CRO, you require the following:</b>
					</p>
					<p>
					<ul>
						<li><b>Google Account</b></li>
						<li><b>Google Chrome (For adding Printers)</b></li>
					</ul>
					</p>
					<p>
						If you do not already have a Google account, please create one
						using the following link: <a
							href='https://accounts.google.com/SignUp?service=mail&continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&ltmpl=default'
							target='_blank'>https://accounts.google.com/SignUp?service=mail&continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&ltmpl=default.</a>
					</p>
					<p>
						Now add printers under your Google account.Printers can be added
						only by using Google Chrome. If it is not available in your
						system, please download and install the same using the following
						link: <a
							href='https://www.google.com/chrome/browser/features.html?brand=CHBD&gclid=CLzFoaqnhdICFc0TaAodGa4DGg'
							target='_blank'>https://www.google.com/chrome/browser/features.html?brand=CHBD&gclid=CLzFoaqnhdICFc0TaAodGa4DGg</a>
					</p>
					<p>Once you have Google Chrome in your system, simply follow
						the steps outlined below:</p>
					<p>
					<ol>
						<li>Type (or copy & paste) <b>chrome://devices</b> in the
							Chrome browser
						</li>
						<li>Under <b>Classic Printers,</b> click the <b>Add
								printers</b> button
						</li>
						<li>If you are not already logged into your Google account,
							you will be asked to log into it. Once you are logged in, the
							list of printers connected under the local network will be
							displayed. If the printer is not in the list, Please add the
							printer by installing corresponding drivers in your local system</li>
						<li>You may now select the desired printer from this list and
							click the <b>Add Printers</b> button to add it to your Google
							account
						</li>
						<li>Once the required printers are added,you can click the <b>Manage
								Printers Link</b> to view all the printers under this Google account
						</li>
						<li>Rename the printers if required. <b>(This is for you
								to identify the printers)</b></li>
						<li>Now login into the CRO application and go to <b>Clients</b></li>
						<li>Select all the reports you want printed</li>
						<li>Click the <b>Print Reports</b> Button
						</li>
						<li>A popup window will appear for authentication of your
							Google account</li>
						<li>Enter the Username and Password of your Google account.
							Once the account is authenticated, the list of printers
							associated with that account will be displayed</li>
						<li>Now select the desired printer from the list and click
							the <b>Print</b> button
						</li>
						<li>A popup window will now appear with the list of reports
							you selected for printing, along with the status of the print job
							for each report</li>
						<li>Once the print jobs are completed, the pop up window can
							be closed</li>
					</ol>
					</p>
				</div>
				<div class="modal-footer">
					<button type="close" class="btn btn-danger" data-dismiss="modal">OK</button>
				</div>
			</div>

		</div>
	</div>
	
	<!-- Direct Report Change Status Modal -->
<div class="modal fade" id="directReportChangeStatusModal" role="dialog"
	data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<!-- Modal content-->
		<div class="modal-content">
			<form name="directReportChangeStatusForm">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Change Status</h4>
			</div>
			<div class="modal-body">
				<label>Select Status:</label>
				<select class="form-control" ng-model="directReportStatusValue" name="directReportStatus" required>
				<option value="">-- Select --</option>
				<option value="1">Processing</option>
				<option value="2">Do Not Call</option>
				</select>
				<span class="error-container"
						ng-show="directReportChangeStatusForm.directReportStatus.$dirty && directReportChangeStatusForm.directReportStatus.$invalid">
						<span style="color: red;"
						ng-show="directReportChangeStatusForm.directReportStatus.$error.required">Please
							select status</span>
					</span>
			</div>
			<div class="modal-footer">
				<button type="submit" class="btn btn-success" ng-disabled="directReportChangeStatusForm.$invalid" ng-click="directReportChangeStatus()">Change</button>
				<button type="close" class="btn btn-danger" data-dismiss="modal">Cancel</button>
			</div>
			</form>
		</div>

	</div>
</div>
	<script>
		$(function() {
			$("html,body").scrollTop(0);
		});

		$('#CrashFromDate').datetimepicker({
			pickTime : false,
			format : 'MM/DD/YYYY',
			maxDate : new Date()
		}).on('dp.change', function(selected) {
			var minimumDate = new Date(selected.date.valueOf());
			$('#CrashToDate').data("DateTimePicker").setMinDate(minimumDate);
		});

		$('#CrashToDate').datetimepicker({
			pickTime : false,
			format : 'MM/DD/YYYY',
			maxDate : new Date()
		});
		$('#AddedFromDate').datetimepicker({
			pickTime : false,
			format : 'MM/DD/YYYY',
			maxDate : new Date()
		}).on('dp.change', function(selected) {
			var minimumDate = new Date(selected.date.valueOf());
			$('#AddedToDate').data("DateTimePicker").setMinDate(minimumDate);
		});

		$('#AddedToDate').datetimepicker({
			pickTime : false,
			format : 'MM/DD/YYYY',
			maxDate : new Date()
		});

		$('#archivedFromDate').datetimepicker({
			pickTime : false,
			format : 'MM/DD/YYYY',
			maxDate : new Date()
		}).on(
				'dp.change',
				function(selected) {
					var minimumDate = new Date(selected.date.valueOf());
					$('#archivedToDate').data("DateTimePicker").setMinDate(
							minimumDate);
				});

		$('#archivedToDate').datetimepicker({
			pickTime : false,
			format : 'MM/DD/YYYY',
			maxDate : new Date()
		});

		$(document)
				.ready(
						function() {
							$('[data-toggle="popover"]')
									.popover(
											{
												content : "<p><b>Tier 1:</b> List of accident victims where there are multiple vehicles and at fault is insured.</p><p><b>Tier 2:</b> List of accident victims where there are multiple vehicles but no at fault insurance and the victim is insured. (Medpay or uninsured motorist)</p><p><b>Tier 3:</b> List of accident victims involved in a single car accident. (includes hit and runs)</p><p><b>Tier 4:</b> List of passengers in at-fault vehicle and driver also, if insured.</p><p><b>Others:</b> List of passengers, Not under any tiers.</p>",
												html : true
											});
						});
		$(document)
				.click(
						function(e) {
							$('[data-toggle="popover"]')
									.each(
											function() {
												if (!$(this).is(e.target)
														&& $(this)
																.has(e.target).length === 0
														&& $('.popover').has(
																e.target).length === 0) {
													//$(this).popover('hide');
													$(this).popover('hide')
															.data('bs.popover').inState.click = false
												}
											});
						});
	</script>

	<script src="resources/js/fixed-header.js">
		
	</script>