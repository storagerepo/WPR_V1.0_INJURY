<link rel="stylesheet"
	href="resources/components/datetime/datetimepicker.css"></link>
<script src="resources/components/datetime/datetimepicker.js"></script>
<script src="resources/components/datetime/moment.js"></script>
<div ng-cloak>
<div class="row">
<div class="col-lg-12">
	 <div class="form-group passenger-type pull-right margin-top35">
	<label>Report Type:</label>
			<div class="btn-group">
				<label class="btn btn-default" btn-radio="0"
					ng-model="patient.isRunnerReport"> Normal <span
					class="glyphicon glyphicon-file"></span>
				</label> <label class="btn btn-default" btn-radio="1"
					ng-model="patient.isRunnerReport"> Runner <span
					class="glyphicon glyphicon-file"></span>
				</label>
			</div>
		</div>
	 <div flash-message="2000" class="col-md-5 pull-right margin-top35"></div>
	 <h2 class="page-header">Search Clients</h2>
	</div>
	<!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<div class="row">
 <form name="patientSearchForm" novalidate ng-cloak>
 	<div class="col-md-12 no-padding">
        <div class="col-md-5ths">
        	<label>County</label>&nbsp;<a href="" data-toggle="popover" title="Info on County Selection:" data-content="<p><b>Subscribed - </b>All counties you have subscribed to.</p><p><b>Preferred - </b> Only counties you usually prefer to access.</p>"><i class="fa fa-info-circle"></i></a><span class="error-class" ng-show="searchCountyMinError"> Select at least one county</span>
     		<div ng-dropdown-multiselect="" preference-list="countyListType" options="mycounties" selected-model="patient.countyId" extra-settings="{idProp:'countyId',displayProp:'countyName',smartButtonMaxItems:'0',scrollable:true,scrollableHeight:'300px',buttonDefaultText:'Select Counties',showPreferenceOption:true}" events="countyEvents"></div>
     		<a href="#/dashboard/UserPreferrence/1" style="text-decoration: underline;" ng-show="countyListType==2">Change Lookup Preference</a>
       	</div>
       	<div class="col-md-5ths">
         	<label>Crash From Date</label>
       		<div class="input-group">
				<input type="text" name="crashFromDate" id="CrashFromDate" class="form-control input-sm" ng-model="patient.crashFromDate" ng-change="checkCustomDate(patient.numberOfDays)" placeholder="Crash From Date" > 
				<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
			</div>
       	</div>
       	
       	<div class="col-md-5ths">
			<label>Number of Days</label>
         	<select class="form-control input-sm"  ng-model="patient.numberOfDays" name="numberOfDays" ng-change="checkCustomDate(patient.numberOfDays)">
            	<option value="1">1</option>
            	<option value="7">7</option>
            	<option value="15">15</option>
            	<option value="30">30</option>
            	<option value="0">Custom</option>
			</select>
       	</div>
        <div class="col-md-5ths">
			<label>Crash To Date</label>
        	<div class="input-group">
				<input type="text" name="crashToDate" id="CrashToDate" class="form-control input-sm" ng-model="patient.crashToDate" placeholder="Crash To Date"  ng-disabled="disableCustom"> 
				<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
			</div>
			<span style="color:red" ng-if="crashToRequired==true">Please Enter Crash To Date</span>
        </div>
        <div class="col-md-5ths">
        	<label>Added On From Date</label>
       		<div class="input-group">
				<input type="text" name="addedOnFromDate" id="AddedFromDate" class="form-control input-sm" ng-model="patient.addedOnFromDate" ng-change="checkAddedOnToDate()" placeholder="Added On From Date" > 
				<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
			</div>
        </div>
    </div>

	<div class="col-md-12"><br/></div>
	
	<div class="col-md-12 no-padding">
		<div class="col-md-3ths">
			<label>Added On To Date</label>
       		<div class="input-group">
				<input type="text" name="addedOnToDate" id="AddedToDate" class="form-control input-sm" ng-model="patient.addedOnToDate" ng-disabled="isSelectedAddedFromDate" placeholder="Added On To Date" > 
				<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
			</div>
       		<span style="color:red" ng-if="addedToRequired==true">Please Enter Added On To Date</span>
       	</div>
       	<div class="col-md-3ths">
       		<label>Lawyers</label>
       		<select class="form-control input-sm" ng-model="patient.lawyerId">
       			<option value="0">All</option>
       			<option value="-1">N/A</option>
          		<option ng-repeat="lawyer in lawyers" value="{{lawyer.lawyerId}}" ng-selected="{{lawyer.lawyerId == patient.lawyerId}}">{{lawyer.firstName}}&nbsp;{{lawyer.lastName}}</option>
     		</select>
       	</div>
       	<div class="col-md-3ths">
       		<label>Tier</label>&nbsp;&nbsp;<a href="" data-toggle="popover" title="Tier Details (Deceased victims not listed)"><i class="fa fa-info-circle"></i></a><span class="error-class" ng-show="searchTierMinError">&nbsp;&nbsp;Select at least one tier</span>
         	<div ng-dropdown-multiselect="" options="defaultTiers" selected-model="patient.tier" extra-settings="{smartButtonMaxItems:'0',disable:patient.isRunnerReport==1}"></div>
            
       	</div>
       	  <div class="col-md-3ths">
	       		<label>Local Report Number</label>
					<input type="text" name="localReportNumber" class="form-control input-sm" ng-model="patient.localReportNumber" placeholder="Local Report Number"> 
				
	        </div>
	    <div class="col-md-3ths">
	       	<label>Damage Scale</label>&nbsp;&nbsp;<a href="" class="some-popover-link" data-original-title="" data-toggle="popover" title="Damage Scale Details" data-placement="left" data-content="<p><ul><li>1 - None</li><li>2 - Minor</li><li>3 - Functional</li><li>4 - Disabling</li><li>9 - Unknown</li><li>N/A - Not Available</li></ul></p>"><i class="fa fa-info-circle"></i></a>
         	<div ng-dropdown-multiselect="" options="defaultDamageScale" selected-model="patient.damageScale" extra-settings="{smartButtonMaxItems:'0',disable:patient.isRunnerReport==1}"></div>
         	<span class="error-class" ng-show="searchDamageScaleMinError">&nbsp;&nbsp;Select at least one Damage Scale</span>
	     </div>
       	<div class="col-md-2ths">
       		<label>&nbsp;</label>
       		<div>
        		<a class="btn btn-success hint--top" ng-class="{'button-disable':patientSearchForm.$invalid}"  ng-disabled='patientSearchForm.$invalid||disableSearch' ng-click="searchPatients()" data-hint="search"><i class="fa fa-search"></i></a>
        		<a class="btn btn-danger hint--top" ng-click="resetSearchData()" data-hint="Reset"><i class="fa fa-undo"></i></a>
       		</div>
        </div>
     </div>
     
     <div class="col-md-12">
			<div class="col-md-12 no-padding hr-tag-alter"></div>
				<div  class="col-md-6 no-padding">
					<a href="" ng-disabled="isCleanCheckbox()||patient.isArchived==1" ng-click="assignlawyerPopup()" class="btn btn-sm btn-success">Assign Lawyer</a>
					<a href="" ng-disabled="isCleanCheckbox()||patient.isArchived==1" ng-click="releaseLawyer()" class="btn btn-sm btn-danger">Release From Lawyer</a>
					<a href="" ng-disabled="isCleanCheckbox()||patient.isArchived==1" ng-click="moveArchive()" class="btn btn-sm btn-warning">Archive all</a>
					<a href="" ng-disabled="isCleanCheckbox()||patient.isArchived==0" ng-click="releaseArchive()" class="btn btn-sm btn-primary">Restore all</a>
					<a href="" ng-disabled="isCleanCheckbox()" ng-click="printReports()" class="btn btn-sm btn-info">Print Reports</a>&nbsp;<a href="" data-toggle="modal" data-target="#printReportsHelpModal"><i class="fa fa-info-circle"></i></a>
			</div>
				<div class="col-md-6 no-padding">
					<div class="col-md-3 margin-top-5 text-right no-padding">Records Type&nbsp;&nbsp;</div>
					<div class="col-md-3 no-padding">
						<select class="form-control input-sm" ng-change="secoundarySearchPatient();resetResultData();" name="isArchived" ng-model="patient.isArchived">
				          	<option value="0">Open</option>
				          	<option value="1">Archived</option>
				     	</select>
					</div>
					<div class="col-md-3 margin-top-5 text-right no-padding">Filter Status by&nbsp;&nbsp; </div>
					<div class="col-md-3 no-padding">
						<select class="form-control input-sm" ng-change="secoundarySearchPatient()" ng-model="patient.patientStatus">
							<option value="7">All</option>
				          	<option value="0">New</option>
				          	<option value="1">Active</option>
				          	<option value="6">To be Re-Assigned</option>
				     	</select>
					</div>
				</div>
				
				<div class="col-md-12 no-padding hr-tag-alter"></div>
		</div>
   <div class="col-md-12">
		<div class="col-md-12 archive-filter" ng-show="patient.isArchived==1">
		<div class="col-md-3"></div>
		<div class="col-md-9 padding-7px">
		<div class="col-md-4 margin-top-5 no-padding text-right no-padding"><b>Filter by Archive Date : </b></div>
		<div class="col-md-8 no-padding">
				<div class="col-md-1 margin-top-5 no-padding">&nbsp;From</div>
				<div class="col-md-3 no-padding">
       			<div class="input-group">
					<input type="text" name="archivedFromDate" id="archivedFromDate" class="form-control input-sm" ng-change="checkArchivedToDate()" ng-model="patient.archivedFromDate" placeholder="Date"> 
					<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
				</div>
				<span style="color:red;font-size:13px" ng-show="archivedFromDateRequired">Enter From Date</span>
				</div>
				<div class="col-md-1 margin-top-5 no-padding">&nbsp;&nbsp; To </div>
				<div class="col-md-3 no-padding">
	       		<div class="input-group">
					<input type="text" name="archivedToDate" id="archivedToDate" class="form-control input-sm" ng-model="patient.archivedToDate" ng-change="archivedToDateRequired=false" placeholder="Date"> 
					<span class="input-group-addon white-color-bg"> <span class="glyphicon glyphicon-calendar"></span></span>
				</div>
				<span style="color:red;font-size:13px" ng-show="archivedToDateRequired">Enter To Date</span>
				</div>
				<div class="col-md-3 margin-top-5"><a class="btn btn-success btn-xs" href="" ng-click="searchWithArchiveDateFilter()">Select</a> &nbsp; <a href="" ng-click="resetArchiveFilterDate()"><u>Reset</u></a></div>
				
	        </div>
	       </div>
		</div>
		</div>
         </form>                    
                    <div class="col-md-12">
                  	<table class="table table-bordered persist-area"  ng-cloak>
                        <thead  class="persist-header">
                            <tr>
                           	 	<th width="2%"><input ng-change="isChecked()" ng-model="isCheckedAllPatients" type="checkbox" id="checkAll"></th>
                                <th width="16%">Client Name <br/><span class="client-name">(Last, First, Middle)</span></th>
                                <th width="12%">Age</th>
                                 <th width="6%">Unit / Damage</th>
                                <th width="9%">County</th>
                                <th width="11%">Lawyer</th>                               
                                <th width="15%">Address</th>                                
                                <th width="5%">Tier</th>
                                <th width="11%">Status</th>
                                <th width="8%" ng-show="patient.isArchived==1" ng-cloak>Archived On</th>
                                <th width="7%">Actions</th>
                            </tr>
                            <tr>
                            <th></th>
								<th>
								<div class="input-group">
  								<span class="input-group-addon search" id="basic-addon2"><i class="fa fa-search"></i></span>
								<input class="form-control" type="text"
									ng-model="patient.patientName" ng-change="secoundarySearchPatient()" placeholder="Name"></div>
								</th>
								<th>
								 <div ng-dropdown-multiselect="" options="defaultAge" selected-model="patient.age" extra-settings="{smartButtonMaxItems:'0',scrollable:false,showCheckAll: false,showUncheckAll:false,disable:patient.isRunnerReport==1}" events="ageEvents"></div>
								 </th>
								<th></th>
								<th></th>									
								<th></th>
								<th></th>
								<th></th>
								<th></th>
								<th ng-show="patient.isArchived==1"></th>
								<th><a href="" ng-click="exportToExcel()" class="btn btn-sm btn-export" ng-disabled="exportButton || totalRecords==0"><span ng-show="exportButton"><i class="glyphicon glyphicon-refresh spinning"></i>&nbsp;</span>{{exportButtonText}}</a></th>	
								
							</tr>
                        </thead>
                        <tbody>
                        <tr class="archive-group-header" ng-show="lAdminPatientSearchData[0].archivedDate!=''"
					ng-repeat-start="resultMainData in lAdminPatientSearchData">
					<td colspan="1"><input ng-change="selectArchiveGroup(this,'{{resultMainData.archivedDate}}')" ng-model="isCheckedAllGroupArchivePatients" ng-true-value="true" ng-false-value="false" type="checkbox" id="{{resultMainData.archivedDate}}"></td>
					<td colspan="10"><span><b>Archive Date: </b>{{resultMainData.archivedDate}}</span></td>
				</tr>
                         <tr class="group-header-back" ng-repeat-start="resultData in resultMainData.searchResult">
                       <td colspan="1"><input ng-change="selectGroup(this,'{{resultMainData.archivedDate}}')" ng-model="isCheckedAllGroupPatients" ng-true-value="true" ng-false-value="false" type="checkbox" id="{{resultData.localReportNumber}}{{resultMainData.archivedDate}}"></td><td colspan="10" ><span><b>Local Report No:</b> 	{{resultData.localReportNumber}}  </span><span class="badge badge-warning hint--top" ng-show="resultData.isRunnerReport==2" data-hint="Runner Report">R</span><span class="pull-right"><span><b>Unit In Error: </b><span ng-show="resultData.unitInError!='' && resultData.unitInError!=null">{{resultData.unitInError}}</span><span ng-show="resultData.unitInError=='' || resultData.unitInError==null">-</span></span>&nbsp;&nbsp;|&nbsp;&nbsp;<span><b>Crash Date: </b>{{resultData.crashDate}}</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span><b>Added Date: </b>{{resultData.addedDate}}</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span><b>Clients Count:</b></span>&nbsp;&nbsp;<span class="hint--top patient-count-circle" data-hint="{{resultData.numberOfPatients}} Clients">{{resultData.numberOfPatients}}</span>&nbsp;&nbsp;&nbsp;</span></td>
                          </tr>
                          <tr dir-paginate="lAdminData in resultData.patientSearchLists|itemsPerPage:patient.itemsPerPage" current-page="patient.pageNumber" total-items="totalRecords" pagination-id="lawyerAdminPatientPageId">
                            
                                <td><input type="checkbox" ng-change="isCheckedIndividual()" ng-model="lAdminData.selected"/></td>
                                <td><span ng-if="(lAdminData.injuries==2 || lAdminData.injuries==3 || lAdminData.injuries==4) && (lAdminData.age>=18||lAdminData.age==null)"><a href="" class="hint--top redText" ng-click="viewPatientModal(lAdminData.patientId)"  data-hint="View Client">{{lAdminData.name}}</a><span class="redText margin-left-10 hint--top" data-hint="Injuries : {{lAdminData.injuriesName}}"><i class="fa fa-arrow-up" ></i></span><span ng-show="lAdminData.seatingPosition=='1'" class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span>
                                <span class="badge hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==1" data-hint="Runner Report">R</span><span class="badge badge-success hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==2" data-hint="Updated Runner Report">R</span> </span>
                                	<span ng-if="(lAdminData.injuries==2 || lAdminData.injuries==3 || lAdminData.injuries==4) && lAdminData.crashSeverity==2 && (lAdminData.age<18 && lAdminData.age!=null)"><a href="" class="hint--top warningText" ng-click="viewPatientModal(lAdminData.patientId)"  data-hint="View Client">{{lAdminData.name}}</a><span class="redText margin-left-10 hint--top" data-hint="Injuries : {{lAdminData.injuriesName}}"><i class="fa fa-arrow-up" ></i></span><span ng-show="lAdminData.seatingPosition=='1'" class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span><span class="badge hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==1" data-hint="Runner Report">R</span><span class="badge badge-success hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==2" data-hint="Updated Runner Report">R</span></span>
                                    <span ng-if="(lAdminData.injuries!=2 && lAdminData.injuries!=3 && lAdminData.injuries!=4) && (lAdminData.age>=18||lAdminData.age==null)"><a href="" class="hint--top" ng-click="viewPatientModal(lAdminData.patientId)"  data-hint="View Client">{{lAdminData.name}}</a><span ng-show="lAdminData.seatingPosition=='1'" class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span><span class="badge hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==1" data-hint="Runner Report">R</span><span class="badge badge-success hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==2" data-hint="Updated Runner Report">R</span></span>
                                    <span ng-if="(lAdminData.injuries!=2 && lAdminData.injuries!=3 && lAdminData.injuries!=4) && (lAdminData.age<18 && lAdminData.age!=null)"><a href="" class="hint--top warningText" ng-click="viewPatientModal(lAdminData.patientId)"  data-hint="View Client">{{lAdminData.name}}</a><span ng-show="lAdminData.seatingPosition=='1'" class="margin-left-10 hint--top driver-icon" data-hint="Driver">&nbsp;</span><span class="badge hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==1" data-hint="Runner Report">R</span><span class="badge badge-success hint--top" ng-show="lAdminData.isRunnerReport==2&&lAdminData.isRunnerReportPatient==2" data-hint="Updated Runner Report">R</span></span>
                                    </td>
                              <td title="Age"><span ng-show="lAdminData.age!='' && lAdminData.age!=null">{{lAdminData.age}}</span><span ng-show="lAdminData.age=='' || lAdminData.age==null">-</span></td>
                              <td title="Unit Number"><span ng-show="lAdminData.unitNumber!='' && lAdminData.unitNumber!=null">{{lAdminData.unitNumber}}
                              	<span class="badge badge-success hint--top" ng-show="lAdminData.damageScale==1" data-hint="None">{{lAdminData.damageScale}}</span>
                          <span class="badge badge-yellow hint--top" ng-show="lAdminData.damageScale==2" data-hint="Minor">{{lAdminData.damageScale}}</span>
                          <span class="badge badge-primary hint--top" ng-show="lAdminData.damageScale==3" data-hint="Functional">{{lAdminData.damageScale}}</span>
                          <span class="badge badge-danger hint--top" ng-show="lAdminData.damageScale==4" data-hint="Disabling">{{lAdminData.damageScale}}</span>
                          <span class="badge badge-default hint--top" ng-show="lAdminData.damageScale==9" data-hint="Unknown">{{lAdminData.damageScale}}</span>
                              </span>
                              <span ng-show="lAdminData.unitNumber=='' || lAdminData.unitNumber==null">-</span></td>
                                <td title="County">{{lAdminData.county}}</td>
                                <td title="Lawyer Name"><span ng-if="lAdminData.lawyerFirstName==null && lAdminData.lawyerLastName==null">N/A</span>{{lAdminData.lawyerFirstName}}&nbsp;{{lAdminData.lawyerLastName}}</td>
                                
                                <td title="Address"><span ng-show="lAdminData.address!='' && lAdminData.address!=null">{{lAdminData.address}}</span><span ng-show="lAdminData.address=='' || lAdminData.address==null">-</span></td>
                                
                                <td><span ng-show="lAdminData.tier!='' && lAdminData.tier!=null">Tier {{lAdminData.tier}}</span><span ng-show="lAdminData.tier=='' || lAdminData.tier==null">-</span></td>
                                <td title="Status">{{lAdminData.patientStatusName}}</td>
                                <td title="Archived On" ng-show="patient.isArchived==1" ng-cloak>{{lAdminData.archivedDateTime}}</td>
                                <td>
                                <a href="{{lAdminData.crashReportFileName}}" ng-cloak target="_blank" class="btn btn-xs btn-info hint--top" data-hint="View Crash Report"><i
								class="fa fa-file-pdf-o"></i></a>
								<span ng-show={{lAdminData.isArchived==0||lAdminData.isArchived==null}}>
                                <a href="" ng-cloak ng-hide={{lAdminData.lawyerId!=null}} class="btn btn-xs btn-danger hint--top" data-hint="Assign Lawyer" ng-click="assignSingleLawyerPopup(lAdminData.patientId,lAdminData.name,lAdminData.lawyerId)"><i class="fa fa-external-link-square"></i></a>
                                <a href="" ng-cloak ng-show={{lAdminData.lawyerId!=null}} class="btn btn-xs btn-success hint--top" data-hint="Change Lawyer" ng-click="assignSingleLawyerPopup(lAdminData.patientId,lAdminData.name,lAdminData.lawyerId)"><i class="fa fa-external-link-square"></i></a>
                                 <a href="" ng-cloak ng-click="moveSingleFileToArchive(lAdminData.patientId)" class="btn btn-xs btn-success hint--top" data-hint="Archive"><i class="fa fa-archive"></i></a>
                                </span>
                                <a href="" ng-cloak ng-show={{lAdminData.isArchived==1}} ng-click="releaseSingleFileFromArchive(lAdminData.patientId)" class="btn btn-xs btn-danger hint--top" data-hint="Restore"><i class="fa fa-share-square-o"></i></a>
                                </td>
                            </tr>
                            <tr ng-repeat-end=""></tr>
                            <tr ng-repeat-end=""></tr>
                            <tr ng-show="totalRecords==0">
                            <td colspan="11"><center><strong>No Records Found!!!</strong></center></td>
                            </tr>
                        </tbody>
                    </table>
                    <dir-pagination-controls ng-show="totalRecords>0" max-size="5" direction-links="true" boundary-links="true" pagination-id="lawyerAdminPatientPageId">
    					</dir-pagination-controls> 
    					
<div class="col-md-3 pull-right no-padding">
<label>Number of Records</label>
	<select
		class="form-control" ng-model="patient.itemsPerPage" ng-change="itemsPerFilter()" name="itemsPerPage"
		id="noOfRows">
		<option value="10">Show 10 Per Page</option>
		<option value="25">Show 25 Per Page</option>
		<option value="50">Show 50 Per Page</option>
		<option value="100">Show 100 Per Page</option>
		<option value="250">Show 250 Per Page</option>
	</select> 
	</div>
</div>  

<div class="modal fade" id="assignlawyerModal" role="dialog">
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content">
      <form name="myForm" novalidate>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Assign Lawyer </h4>
        </div>
        <div class="modal-body">
       <span ng-show="single">
       <label>Name</label>&nbsp;&nbsp;<span>{{patientname}}</span> <br/>
       <br/>
        </span>
        	<label>Choose Lawyer</label>
       			<select class="form-control" ng-model="myForm.lawyerId" required>
       			<option value="">--Select Lawyer--</option>
          			<option ng-repeat="lawyer in lawyers" ng-if="lawyer.status==1" value="{{lawyer.lawyerId}}" ng-selected="{{lawyer.lawyerId === lAdminData.lawyerId}}">{{lawyer.firstName}} {{lawyer.lastName}}</option>
     			</select>
        </div>
        <div class="modal-footer" >
         <button type="close" class="btn btn-danger" data-dismiss="modal">Cancel</button>
           <span ng-hide="single"> <a href="" type="submit" class="btn btn-success"  data-dismiss="modal" ng-disabled='myForm.$invalid' ng-click="assignLawyer()">Assign</a></span> 
            <span ng-show="single"> <a href="" type="submit" class="btn btn-success"  data-dismiss="modal" ng-disabled='myForm.$invalid' ng-click="assignSingleLawyer(patientId)">Assign</a></span>
        </div>
        </form>
      </div>
      
    </div>
 </div>
</div>   					


<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content ">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<div class="form-group passenger-type pull-right">
				 <div class="btn-group" data-toggle="buttons">
                                        <label class="btn btn-default unit-toggle-label" ng-class="{active:patientDetails.seatingPosition!='1' || patientDetails.seatingPosition==null}" ng-disabled="patientDetails.seatingPosition=='1'">
                                            <input type="radio" name="unit" ng-model="patientDetails.seatingPosition"  id="option1" autocomplete="off"> Passenger
                                        </label>
                                        <label class="btn btn-default unit-toggle-label" ng-class="{active:patientDetails.seatingPosition=='1'}" ng-disabled="patientDetails.seatingPosition!='1' || patientDetails.seatingPosition==null">
                                            <input type="radio" name="unit" ng-model="patientDetails.seatingPosition" ng-selected="patientDetails.seatingPosition=='1'" id="option2" autocomplete="off"> &nbsp;&nbsp;Driver&nbsp;&nbsp;
                                        </label>
                                    </div>
				</div>
				<h4 class="modal-title" id="myModalLabel">Clients Details</h4>
			</div>
			<div class="modal-body">
				<table class="table table-striped table-bordered">
					<tr>
						<td class="col-md-3"><b>Name</b></td>
						<td class="col-md-3">{{patientDetails.name}}</td>
						<td class="col-md-3"><b>Gender</b></td>
						<td class="col-md-3">{{patientDetails.gender}}</td>
						
					</tr>
					<tr>
						<td class="col-md-3"><b>Date Of Birth</b></td>
						<td class="col-md-3">{{patientDetails.dateOfBirth}}</td>
						<td class="col-md-3"><b>Age</b></td>
						<td class="col-md-3">{{patientDetails.age}}</td>
					</tr>
					<tr>
						<td class="col-md-3"><b>Phone Number</b></td>
						<td class="col-md-3">{{patientDetails.phoneNumber}}</td>
						<td class="col-md-3"><b>Address</b></td>
						<td class="col-md-3">{{patientDetails.address}}</td>
						
					</tr>
					<tr>
						<td class="col-md-3"><b>Unit Number</b></td>
						<td class="col-md-3">{{patientDetails.unitNumber}}</td>
						<td class="col-md-3"><b>Number of Units</b></td>
						<td class="col-md-3">{{patientDetails.numberOfUnits}}</td>
						
					</tr>
					<tr>
						<td class="col-md-3"><b>Units in Error</b></td>
						<td class="col-md-3">{{patientDetails.unitInError}}</td>
						<td class="col-md-3"><b>Local Report Number</b></td>
						<td class="col-md-3">{{patientDetails.localReportNumber}}</td>
						
						
					</tr>
					<tr>
						<td class="col-md-3"><b>Injuries</b></td>
						<td class="col-md-3">{{patientDetails.injuriesName}}</td>
						<td class="col-md-3"><b>Crash Severity</b></td>
						<td class="col-md-3">{{patientDetails.crashSeverityName}}</td>
					</tr>
					<tr>
					
						<td class="col-md-3"><b>Crash Date</b></td>
						<td class="col-md-3">{{patientDetails.crashDate}}</td>
							<td class="col-md-3"><b>Time of Crash</b></td>
						<td class="col-md-3">{{patientDetails.timeOfCrash}}</td>
						
					</tr>
					<tr>
						<td class="col-md-3"><b>EMS Agency</b></td>
						<td class="col-md-3">{{patientDetails.emsAgency}}</td>
						<td class="col-md-3"><b>Report Agency Name</b></td>
						<td class="col-md-3">{{patientDetails.reportingAgencyName}}</td>
					</tr>
					
					<tr>
						<td class="col-md-3"><b>County</b></td>
						<td class="col-md-3">{{patientDetails.county}}</td>
						<td class="col-md-3"><b>City Village Township</b></td>
						<td class="col-md-3">{{patientDetails.cityVillageTownship}}</td>
					</tr>
					<tr>
					<td class="col-md-3"><b>Medical Facility</b></td>
						<td class="col-md-3">{{patientDetails.medicalFacility}}</td>
						<td colspan="2"></td>
					</tr>
					<tr>
						<td class="col-md-3"><b>At Fault INS. Company</b></td>
						<td class="col-md-3">{{patientDetails.atFaultInsuranceCompany}}</td>
						<td class="col-md-3"><b>At Fault Policy Number</b></td>
						<td class="col-md-3">{{patientDetails.atFaultPolicyNumber}}</td>
					</tr>
					<tr>
						<td class="col-md-3"><b>Victim INS. Company</b></td>
						<td class="col-md-3">{{patientDetails.victimInsuranceCompany}}</td>
						<td class="col-md-3"><b>Victim Policy Number</b></td>
						<td class="col-md-3">{{patientDetails.victimPolicyNumber}}</td>
					</tr>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
  <!-- Export Options Modal -->
<div class="modal fade" id="exportOptionModal" role="dialog" data-backdrop="static" 
   data-keyboard="false" >
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content">
      <form name="changePasswordModalForm" novalidate>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Export Preference</h4>
        </div>
        <div class="modal-body">
        	<span class="text-center">
        	<label class="radio-inline"><input type="radio" value="1" name="exportFormat" ng-model="formatType" ng-click="resetUserPreferenceError()"/>Standard</label> &nbsp;&nbsp;&nbsp;&nbsp;
        	<label class="radio-inline"><input type="radio" value="2" name="exportFormat" ng-model="formatType" ng-click="checkPreferenceStatus()"/>Custom</label>
        	</span><br/>
        	<span style="color:red" ng-show="userPrefenceError">Currently you are not done with the custom preference. To setup, please <a href="" ng-click="goToSettings()"><u>click here</u></a></span>
        </div>
        <div class="modal-footer" >
         	<button type="close" class="btn btn-danger" data-dismiss="modal">Cancel</button>
             <a href="" type="submit" class="btn btn-success"  data-dismiss="modal" ng-disabled="userPrefenceExportButton" ng-click="exportExcelByType()">Export</a>
        </div>
        </form>
      </div>
      
    </div>
 </div> 
 
  <!-- Export Excel Alert Modal  -->
 <div class="modal fade" id="exportAlertModal" role="dialog" data-backdrop="static" 
   data-keyboard="false" >
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Alert</h4>
        </div>
        <div class="modal-body">
        	<span style="color:red;">Please do filter by Added on From & To date. <br/>System recommends to download 3 months of data.</span>
        </div>
        <div class="modal-footer" >
         	<button type="close" class="btn btn-danger" data-dismiss="modal">OK</button>
        </div>
      </div>
      
    </div>
 </div>		
 
 <!-- Select Printer -->
    <div class="modal fade" id="selectPrinterModal" role="dialog" data-backdrop="static" 
   data-keyboard="false" >
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content">
      <form name="printerselectform" no-validate>
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Printer</h4>
        </div>
        <div class="modal-body">
        	<label>Logged in User account :</label> {{user}} &nbsp;&nbsp; - <a href="" ng-click="switchAccount()">Switch Account</a><br/><br/>
        	<select ng-cloak class="form-control" name="printer" ng-model="printerId" required onchange="this.style.color = this.options[this.selectedIndex].style.color;">
        	<option value="">-- Please Select --</option>
        	<option ng-repeat="printer in printersList" ng-if="printer.id!='__google__docs'" ng-style="{color:{ONLINE:'green',OFFLINE:'red'}[printer.connectionStatus]}" value="{{printer.id}}">{{printer.defaultDisplayName}} {{printer.displayConnectionStatus}}</option>
        	</select>
        	<span class="error-container" ng-show="printerselectform.printer.$dirty && printerselectform.printer.$invalid">
        		<span style="color:red;" ng-show="printerselectform.printer.$error.required">Please select printer</span>
        	</span>
        	<br/>
        	<div><label>Note :</label> <ul><li>Printers listed here are based on the associated google account. If you want a different printer, Please Click <b>Switch Account</b> link and login with the corresponding google account.</li><li>To add printers in google account, please <a href="" data-dismiss="modal" ng-click="moveToHelpPage();">click here</a> and follow the instructions.</li></ul></div>
        </div>
        <div class="modal-footer" >
         	<a class="btn btn-danger" ng-disabled="printerselectform.$invalid" data-dismiss="modal" ng-click="postFilesToPrint()">Print</a>
        </div>
       </form>
      </div>
    </div>
 </div>
 
 <!-- Print Rports Help Info -->
  <div class="modal fade" id="printReportsHelpModal" role="dialog" data-backdrop="static" 
   data-keyboard="false" >
    <div class="modal-dialog modal-lg">    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">How to Print Reports?</h4>
        </div>
        <div class="modal-body">
        	<p><b>For printing reports from CRO, you require the following:</b></p>
        	<p><ul><li><b>Google Account</b></li><li><b>Google Chrome (For adding Printers)</b></li></ul></p>
        	<p>If you do not already have a Google account, please create one using the following link: <a href='https://accounts.google.com/SignUp?service=mail&continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&ltmpl=default' target='_blank'>https://accounts.google.com/SignUp?service=mail&continue=https%3A%2F%2Fmail.google.com%2Fmail%2F&ltmpl=default.</a></p>
        	<p>Now add printers under your Google account.Printers can be added only by using Google Chrome. If it is not available in your system, please download and install the same using the following link: <a href='https://www.google.com/chrome/browser/features.html?brand=CHBD&gclid=CLzFoaqnhdICFc0TaAodGa4DGg' target='_blank'>https://www.google.com/chrome/browser/features.html?brand=CHBD&gclid=CLzFoaqnhdICFc0TaAodGa4DGg</a></p>
        	<p>Once you have Google Chrome in your system, simply follow the steps outlined below:</p>
        	<p><ol>
        	<li>Type (or copy & paste) <b>chrome://devices</b> in the Chrome browser</li>
        	<li>Under <b>Classic Printers,</b> click the <b>Add printers</b> button</li>
        	<li>If you are not already logged into your Google account, you will be asked to log into it. Once you are logged in, the list of printers connected under the local network will be displayed. If the printer is not in the list, Please add the printer by installing corresponding drivers in your local system</li>
        	<li>You may now select the desired printer from this list and click the <b>Add Printers</b> button to add it to your Google account</li>
        	<li>Once the required printers are added,you can click the <b>Manage Printers Link</b> to view all the printers under this Google account</li>
        	<li>Rename the printers if required. <b>(This is for you to identify the printers)</b></li>
        	<li>Now login into the CRO application and go to <b>Clients</b></li>
        	<li>Select all the reports you want printed</li>
        	<li>Click the <b>Print Reports</b> Button</li>
        	<li>A popup window will appear for authentication of your Google account</li>
        	<li>Enter the Username and Password of your Google account. Once the account is authenticated, the list of printers associated with that account will be displayed</li>
        	<li>Now select the desired printer from the list and click the <b>Print</b> button</li>
        	<li>A popup window will now appear with the list of reports you selected for printing, along with the status of the print job for each report</li>
        	<li>Once the print jobs are completed, the pop up window can be closed</li></ol></p>
        </div>
        <div class="modal-footer" >
         	<button type="close" class="btn btn-danger" data-dismiss="modal">OK</button>
        </div>
      </div>
      
    </div>
 </div>		
<script>
$(function(){
	$("html,body").scrollTop(0);
});
    					
$('#CrashFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
}).on('dp.change', function (selected) {
    var minimumDate = new Date(selected.date.valueOf());
    $('#CrashToDate').data("DateTimePicker").setMinDate(minimumDate);
});

$('#CrashToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
}); 

$('#AddedFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
}).on('dp.change', function (selected) {
    var minimumDate = new Date(selected.date.valueOf());
    $('#AddedToDate').data("DateTimePicker").setMinDate(minimumDate);
});

$('#AddedToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});
$('#archivedFromDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
}).on('dp.change', function (selected) {
    var minimumDate = new Date(selected.date.valueOf());
    $('#archivedToDate').data("DateTimePicker").setMinDate(minimumDate);
});

$('#archivedToDate').datetimepicker({
	pickTime : false,
	format:'MM/DD/YYYY',
	maxDate : new Date()
});
$(document).ready(function(){
    $('[data-toggle="popover"]').popover({
    	content: "<p><b>Tier 1:</b> List of accident victims where there are multiple vehicles and at fault is insured.</p><p><b>Tier 2:</b> List of accident victims where there are multiple vehicles but no at fault insurance and the victim is insured. (Medpay or uninsured motorist)</p><p><b>Tier 3:</b> List of accident victims involved in a single car accident. (includes hit and runs)</p><p><b>Tier 4:</b> List of passengers in at-fault vehicle and driver also, if insured.</p>",
    	html: true, 
    	placement: "right"
    });   
});
$(document).click(function (e) {
    $('[data-toggle="popover"]').each(function () {
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
        	//$(this).popover('hide');
        	 $(this).popover('hide').data('bs.popover').inState.click = false 
        }
    });
});
</script>

<script src="resources/js/fixed-header.js">  </script>